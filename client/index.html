<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Adoptar.io - Pet Rescue</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; touch-action: none; background: #1a1a2e; }
    #game { display: block; width: 100%; height: 100%; touch-action: none; }
    #game-wrap { display: none; position: fixed; inset: 0; }
    #game-wrap.visible { display: block; }
    #game-wrap #game { width: 100%; height: 100%; }
    #game-wrap #ui { position: fixed; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; }
    #ui { position: fixed; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; }
    #ui > * { pointer-events: auto; }
    .top-bar {
      position: absolute; top: 0; left: 0; right: 0; height: 48px;
      background: linear-gradient(180deg, rgba(30,35,50,0.4) 0%, rgba(22,26,38,0.4) 100%);
      border-bottom: 2px solid rgba(255,255,255,0.08);
      display: flex; align-items: center; justify-content: space-between; padding: 0 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    .top-bar .score { font: 700 14px/1 Rubik, sans-serif; color: #7bed9f; text-shadow: 0 0 12px rgba(123,237,159,0.4); }
    .top-bar .game-clock { font: 600 14px/1 monospace; color: rgba(255,255,255,0.7); background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px; }
    .top-bar .season-badge { font: 600 12px/1 Rubik, sans-serif; padding: 3px 8px; border-radius: 4px; letter-spacing: 0.03em; }
    .top-bar .season-badge.winter { background: rgba(100,150,220,0.35); color: #d0e8ff; }
    .top-bar .season-badge.spring { background: rgba(80,180,80,0.35); color: #a8f0a8; }
    .top-bar .season-badge.summer { background: rgba(220,180,50,0.35); color: #fff3b0; }
    .top-bar .season-badge.fall { background: rgba(200,120,50,0.35); color: #ffd8a8; }
    .top-bar .game-title { display: none; }
    .top-bar .timer { font: 700 14px/1 Rubik, sans-serif; color: #fff; letter-spacing: 0.05em; }
    .top-bar #auth-area { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    .top-bar #auth-area.hidden { display: none; }
    .top-bar .auth-link { font: 600 12px/1 Rubik, sans-serif; color: rgba(255,255,255,0.85); text-decoration: none; }
    .top-bar .auth-link:hover { color: #7bed9f; }
    .top-bar .auth-profile { font: 600 12px/1 Rubik, sans-serif; color: #7bed9f; }
    .top-bar .auth-guest { font: 600 12px/1 Rubik, sans-serif; color: rgba(255,255,255,0.6); margin-left: 4px; }
    .top-bar .settings-btn { background: none; border: none; color: rgba(255,255,255,0.8); font-size: 18px; cursor: pointer; padding: 0 4px; }
    .top-bar .settings-btn:hover { color: #7bed9f; }
    .top-bar .ping-display { font: 600 10px Rubik, sans-serif; color: rgba(255,255,255,0.7); margin-left: 4px; }
    .switch-server { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: rgba(35,42,60,0.98); border: 2px solid #ff6b6b; border-radius: 12px; padding: 14px 20px; z-index: 55; text-align: center; box-shadow: 0 8px 24px rgba(0,0,0,0.4); }
    .switch-server.hidden { display: none; }
    .switch-server p { font: 600 14px Rubik, sans-serif; color: #fff; margin-bottom: 10px; }
    .switch-server-btn { padding: 8px 16px; font: 600 12px Rubik, sans-serif; background: #ff6b6b; border: none; border-radius: 6px; color: #fff; cursor: pointer; }
    .lobby-overlay { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 69; background: rgba(35,42,60,0.98); border: 2px solid #7bed9f; border-radius: 12px; padding: 24px; text-align: center; box-shadow: 0 8px 24px rgba(0,0,0,0.5); }
    .lobby-overlay.hidden { display: none; }
    .lobby-message { font: 700 16px Rubik, sans-serif; color: #7bed9f; margin-bottom: 12px; }
    .lobby-countdown { font: 600 14px Rubik, sans-serif; color: rgba(255,255,255,0.9); margin-bottom: 14px; }
    .lobby-countdown.hidden { display: none; }
    .lobby-player-list { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin: 12px 0; max-width: 300px; }
    .lobby-player { background: rgba(123,237,159,0.2); border: 1px solid #7bed9f; border-radius: 6px; padding: 6px 12px; font: 600 12px Rubik, sans-serif; color: #fff; cursor: pointer; position: relative; display: flex; align-items: center; gap: 4px; }
    .lobby-player:hover { background: rgba(123,237,159,0.35); }
    .lobby-player.is-friend { border-left: 3px solid #2ecc71; background: rgba(46,204,113,0.15); }
    .lobby-player.is-foe { border-left: 3px solid #e74c3c; background: rgba(231,76,60,0.15); }
    .lobby-player-list:empty { display: none; }
    /* Relationship indicator icons */
    .rel-icon { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 4px; flex-shrink: 0; }
    .rel-icon.friend-icon { background: #2ecc71; }
    .rel-icon.foe-icon { background: #e74c3c; }
    .rel-dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 4px; vertical-align: middle; }
    .rel-dot-friend { background: #2ecc71; }
    .rel-dot-foe { background: #e74c3c; }
    /* Relationship context popup */
    .rel-popup { position: fixed; z-index: 200; background: rgba(35,42,60,0.98); border: 2px solid #7bed9f; border-radius: 10px; padding: 12px 16px; box-shadow: 0 8px 24px rgba(0,0,0,0.5); min-width: 140px; }
    .rel-popup-name { font: 700 13px Rubik, sans-serif; color: #7bed9f; margin-bottom: 10px; text-align: center; }
    .rel-popup-actions { display: flex; flex-direction: column; gap: 6px; }
    .rel-popup-btn { padding: 7px 12px; font: 600 12px Rubik, sans-serif; border: none; border-radius: 6px; cursor: pointer; transition: background 0.15s; color: #fff; }
    .rel-popup-friend { background: #27ae60; }
    .rel-popup-friend:hover { background: #2ecc71; }
    .rel-popup-foe { background: #c0392b; }
    .rel-popup-foe:hover { background: #e74c3c; }
    .rel-popup-remove { background: #555; }
    .rel-popup-remove:hover { background: #777; }
    /* Mark button in leaderboard */
    .rel-mark-btn { background: none; border: 1px solid rgba(255,255,255,0.3); border-radius: 4px; color: rgba(255,255,255,0.7); font-size: 11px; padding: 1px 5px; cursor: pointer; margin-left: 6px; vertical-align: middle; }
    .rel-mark-btn:hover { border-color: #7bed9f; color: #7bed9f; }
    /* Friends panel */
    .friends-panel { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; background: rgba(35,42,60,0.98); border: 2px solid #7bed9f; border-radius: 12px; padding: 20px 24px; box-shadow: 0 8px 24px rgba(0,0,0,0.5); min-width: 260px; max-width: 340px; max-height: 80vh; overflow-y: auto; }
    .friends-panel.hidden { display: none; }
    .friends-panel-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
    .friends-panel-header h3 { font: 700 16px Rubik, sans-serif; color: #7bed9f; margin: 0; }
    .friends-panel-close-btn { background: none; border: none; color: rgba(255,255,255,0.6); font-size: 22px; cursor: pointer; padding: 0 4px; line-height: 1; }
    .friends-panel-close-btn:hover { color: #fff; }
    .friends-panel-btn { display: block; width: 100%; padding: 8px 12px; margin-bottom: 10px; font: 600 12px Rubik, sans-serif; background: rgba(123,237,159,0.15); border: 1px solid #7bed9f; border-radius: 6px; color: #7bed9f; cursor: pointer; transition: background 0.15s; }
    .friends-panel-btn:hover { background: rgba(123,237,159,0.3); }
    .friends-panel-btn.hidden { display: none; }
    .friends-section { margin-bottom: 14px; }
    .friends-section-title { font: 600 13px Rubik, sans-serif; margin: 0 0 8px 0; padding-bottom: 4px; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .friends-title { color: #2ecc71; }
    .foes-title { color: #e74c3c; }
    .friends-row { display: flex; align-items: center; gap: 8px; padding: 5px 0; }
    .friends-name { font: 400 13px Rubik, sans-serif; color: #fff; flex: 1; }
    .friends-remove-btn { background: none; border: none; color: rgba(255,255,255,0.4); font-size: 14px; cursor: pointer; padding: 2px 4px; }
    .friends-remove-btn:hover { color: #e74c3c; }
    .friends-empty { font: 400 12px Rubik, sans-serif; color: rgba(255,255,255,0.5); text-align: center; margin: 16px 0; }
    .team-select { margin: 12px 0; }
    .team-select.hidden { display: none; }
    .team-select-label { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.8); margin-bottom: 8px; }
    .team-select-btns { display: flex; gap: 10px; justify-content: center; }
    .team-btn { padding: 8px 20px; font: 700 13px Rubik, sans-serif; border: 2px solid transparent; border-radius: 8px; cursor: pointer; transition: all 0.15s; color: #fff; }
    .team-btn-red { background: rgba(231,76,60,0.3); border-color: rgba(231,76,60,0.5); }
    .team-btn-red:hover, .team-btn-red.selected { background: rgba(231,76,60,0.6); border-color: #e74c3c; }
    .team-btn-blue { background: rgba(52,152,219,0.3); border-color: rgba(52,152,219,0.5); }
    .team-btn-blue:hover, .team-btn-blue.selected { background: rgba(52,152,219,0.6); border-color: #3498db; }
    .lobby-player.team-red { border-left: 3px solid #e74c3c; background: rgba(231,76,60,0.2); }
    .lobby-player.team-blue { border-left: 3px solid #3498db; background: rgba(52,152,219,0.2); }
    .team-score-hud { display: flex; gap: 6px; align-items: center; font: 700 13px Rubik, sans-serif; }
    .team-score-hud.hidden { display: none; }
    .team-score-hud .team-divider { color: rgba(255,255,255,0.4); }
    .team-score-red { color: #e74c3c; }
    .team-score-blue { color: #3498db; }
    .lobby-ready-btn.hidden { display: none; }
    .lobby-gift-btn { position: absolute; top: 10px; right: 10px; font-size: 24px; background: transparent; border: none; cursor: pointer; padding: 4px; border-radius: 6px; transition: transform 0.15s; }
    .observer-overlay { position: fixed; top: 60px; left: 50%; transform: translateX(-50%); z-index: 69; background: rgba(35,42,60,0.7); border: 2px solid #ffa502; border-radius: 12px; padding: 10px 18px; text-align: center; box-shadow: 0 8px 24px rgba(0,0,0,0.3); }
    .observer-overlay.hidden { display: none; }
    .observer-banner { font: 700 16px Rubik, sans-serif; color: #ffa502; margin: 0 0 4px 0; }
    .observer-info { font: 400 12px Rubik, sans-serif; color: rgba(255,255,255,0.8); margin: 0 0 4px 0; }
    .observer-minimize-btn { position: absolute; top: 4px; right: 6px; background: none; border: none; color: rgba(255,255,255,0.6); font-size: 16px; cursor: pointer; padding: 2px 6px; line-height: 1; }
    .observer-minimize-btn:hover { color: #fff; }
    .observer-mini-btn {
      position: absolute; top: 56px; left: 54px; width: 36px; height: 36px;
      background: rgba(35,42,60,0.85); border: 2px solid #ffa502; border-radius: 8px;
      font-size: 18px; cursor: pointer; z-index: 50; display: flex; align-items: center;
      justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.3); padding: 0;
    }
    .observer-mini-btn.hidden { display: none; }
    @media (max-width: 768px) {
      .observer-overlay { padding: 8px 12px; max-width: 85vw; }
      .observer-banner { font-size: 14px; }
      .observer-info { font-size: 10px; }
    }
    .lobby-gift-btn:hover { transform: scale(1.2); }
    .lobby-gift-btn.hidden { display: none; }
    .lobby-gift-btn.has-gift { animation: pulse-gift 1.5s infinite; }
    .fight-ally-overlay { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 70; background: rgba(35,42,60,0.98); border: 2px solid #7bed9f; border-radius: 12px; padding: 20px; text-align: center; box-shadow: 0 8px 24px rgba(0,0,0,0.5); }
    .fight-ally-overlay.hidden { display: none; }
    .ally-request-popup { position: fixed; top: 80px; left: 50%; transform: translateX(-50%); z-index: 75; background: rgba(35,42,60,0.85); border: 2px solid #7bed9f; border-radius: 10px; padding: 12px 16px; text-align: center; box-shadow: 0 6px 20px rgba(0,0,0,0.5); animation: ally-request-slide 0.3s ease-out; }
    .ally-request-popup.hidden { display: none; }
    @keyframes ally-request-slide { from { opacity: 0; transform: translateX(-50%) translateY(-20px); } to { opacity: 1; transform: translateX(-50%) translateY(0); } }
    .ally-request-text { font: 600 13px Rubik, sans-serif; color: #fff; margin-bottom: 10px; }
    .ally-request-text .requester { color: #7bed9f; font-weight: 700; }
    .ally-request-btns { display: flex; gap: 10px; justify-content: center; }
    .ally-request-btn { padding: 8px 16px; font: 600 12px Rubik, sans-serif; border-radius: 6px; cursor: pointer; border: none; }
    .ally-request-btn.accept { background: #7bed9f; color: #1a1a2e; }
    .ally-request-btn.deny { background: #ff6b6b; color: #fff; }
    .transfer-confirm-popup { position: fixed; top: 80px; left: 50%; transform: translateX(-50%); z-index: 75; background: rgba(35,42,60,0.98); border: 2px solid #3b82f6; border-radius: 10px; padding: 14px 18px; text-align: center; box-shadow: 0 6px 20px rgba(0,0,0,0.5); }
    .transfer-confirm-popup.hidden { display: none; }
    .transfer-confirm-text { font: 600 13px Rubik, sans-serif; color: #fff; margin-bottom: 6px; }
    .transfer-confirm-hint { font: 11px Rubik, sans-serif; color: rgba(255,255,255,0.7); margin-bottom: 12px; }
    .transfer-confirm-btns { display: flex; gap: 10px; justify-content: center; }
    .abandon-confirm-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 200; background: rgba(35,42,60,0.98); border: 2px solid #ff9f43; border-radius: 12px; padding: 20px 24px; text-align: center; box-shadow: 0 8px 28px rgba(0,0,0,0.6); animation: abandon-popup-appear 0.2s ease-out; }
    .abandon-confirm-popup.hidden { display: none; }
    @keyframes abandon-popup-appear { from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); } to { opacity: 1; transform: translate(-50%, -50%) scale(1); } }
    .abandon-confirm-title { font: 700 16px Rubik, sans-serif; color: #ff9f43; margin-bottom: 10px; }
    .abandon-confirm-text { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); margin-bottom: 16px; line-height: 1.4; }
    .abandon-confirm-btns { display: flex; gap: 12px; justify-content: center; }
    .abandon-confirm-btn { padding: 10px 20px; font: 600 13px Rubik, sans-serif; border-radius: 8px; cursor: pointer; border: none; transition: transform 0.1s, opacity 0.1s; }
    .abandon-confirm-btn:hover { transform: scale(1.03); }
    .abandon-confirm-btn.confirm { background: #ff6b6b; color: #fff; }
    .abandon-confirm-btn.cancel { background: rgba(255,255,255,0.15); color: #fff; }
    .join-nobots-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 200; background: rgba(35,42,60,0.98); border: 2px solid #7bed9f; border-radius: 12px; padding: 20px 24px; text-align: center; box-shadow: 0 8px 28px rgba(0,0,0,0.6); animation: abandon-popup-appear 0.2s ease-out; max-width: 340px; }
    .join-nobots-popup.hidden { display: none; }
    .join-nobots-title { font: 700 16px Rubik, sans-serif; color: #7bed9f; margin-bottom: 10px; }
    .join-nobots-text { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); margin-bottom: 16px; line-height: 1.4; }
    .join-nobots-btns { display: flex; gap: 12px; justify-content: center; }
    .join-nobots-btn { padding: 10px 20px; font: 600 13px Rubik, sans-serif; border-radius: 8px; cursor: pointer; border: none; transition: transform 0.1s, opacity 0.1s; }
    .join-nobots-btn:hover { transform: scale(1.03); }
    .join-nobots-btn.join { background: #7bed9f; color: #1a1e2e; }
    .join-nobots-btn.skip { background: rgba(255,255,255,0.15); color: #fff; }
    .match-bots-badge { font-size: 9px; text-transform: uppercase; color: #ff9f43; background: rgba(255,159,67,0.15); padding: 1px 5px; border-radius: 4px; margin-left: 6px; letter-spacing: 0.5px; }
    .breeder-warning-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; background: rgba(60,30,30,0.98); border: 3px solid #ff9f43; border-radius: 12px; padding: 20px 24px; text-align: center; box-shadow: 0 8px 28px rgba(0,0,0,0.6); animation: abandon-popup-appear 0.2s ease-out; max-width: 320px; }
    .breeder-warning-popup.hidden { display: none; }
    .breeder-warning-title { font: 700 16px Rubik, sans-serif; color: #ff9f43; margin-bottom: 10px; }
    .breeder-warning-text { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); margin-bottom: 16px; line-height: 1.5; }
    .breeder-warning-stats { font: 600 12px Rubik, sans-serif; color: #ff6b6b; margin-bottom: 14px; }
    .breeder-warning-btns { display: flex; gap: 12px; justify-content: center; }
    .breeder-warning-btn { padding: 10px 20px; font: 600 13px Rubik, sans-serif; border-radius: 8px; cursor: pointer; border: none; transition: transform 0.1s, opacity 0.1s; }
    .breeder-warning-btn:hover { transform: scale(1.03); }
    .breeder-warning-btn.continue { background: #ff6b6b; color: #fff; }
    .breeder-warning-btn.retreat { background: #7bed9f; color: #1a1a2e; }
    .fight-ally-title { font: 700 14px Rubik, sans-serif; color: #7bed9f; margin-bottom: 8px; }
    .fight-ally-name { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); margin-bottom: 14px; }
    .fight-ally-btns { display: flex; gap: 12px; justify-content: center; }
    .fight-ally-btn { padding: 10px 20px; font: 600 13px Rubik, sans-serif; border-radius: 8px; cursor: pointer; border: none; }
    .fight-btn { background: #ff6b6b; color: #fff; }
    .ally-btn { background: #7bed9f; color: #1a1a2e; }
    .action-menu { position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%); z-index: 100; background: rgba(35,42,60,0.85); border: 2px solid #7bed9f; border-radius: 12px; padding: 16px 20px; box-shadow: 0 8px 24px rgba(0,0,0,0.5); min-width: 260px; max-height: calc(100vh - 120px); overflow-y: auto; }
    .action-menu.hidden { display: none; }
    .action-menu-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .action-menu-title { font: 700 16px Rubik, sans-serif; color: #7bed9f; }
    .action-menu-close { background: none; border: none; color: rgba(255,255,255,0.7); font-size: 18px; cursor: pointer; padding: 0 4px; }
    .action-menu-close:hover { color: #ff6b6b; }
    .action-menu-item { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.15); border-radius: 8px; padding: 12px; margin-bottom: 10px; }
    .action-menu-item:last-child { margin-bottom: 0; }
    .action-menu-item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .action-menu-item-name { font: 600 14px Rubik, sans-serif; color: #fff; }
    .action-menu-item-cost { font: 600 12px Rubik, sans-serif; color: #ffd93d; }
    .action-menu-item-desc { font: 400 11px Rubik, sans-serif; color: rgba(255,255,255,0.7); margin-bottom: 8px; }
    .action-menu-item.owned { opacity: 0.5; }
    .action-menu-item.owned .action-menu-btn { background: #666 !important; cursor: default; }
    .action-menu-progress { margin-bottom: 8px; }
    .action-menu-progress-label { font: 600 11px Rubik, sans-serif; color: rgba(255,255,255,0.7); margin-bottom: 4px; }
    .action-menu-progress-bar { height: 6px; background: rgba(0,0,0,0.4); border-radius: 3px; overflow: hidden; }
    .action-menu-progress-fill { height: 100%; border-radius: 3px; transition: width 0.2s; }
    .action-menu-progress-fill.size { background: linear-gradient(90deg, #7bed9f, #5cd98b); }
    .action-menu-progress-fill.tokens { background: linear-gradient(90deg, #ffd93d, #e6c235); }
    .action-menu-btn { width: 100%; padding: 10px; font: 600 13px Rubik, sans-serif; border-radius: 6px; cursor: pointer; border: none; transition: all 0.15s; }
    .action-menu-btn.ready { background: #7bed9f; color: #1a1a2e; }
    .action-menu-btn.ready:hover { background: #5cd98b; }
    .action-menu-btn:disabled { background: #555; color: rgba(255,255,255,0.5); cursor: not-allowed; }
    .action-menu-hint { font: 600 10px Rubik, sans-serif; color: rgba(255,255,255,0.5); text-align: center; margin-top: 10px; }
    .settings-panel { position: fixed; top: 56px; right: 12px; background: rgba(35,42,60,0.85); border: 2px solid rgba(255,255,255,0.2); border-radius: 12px; padding: 16px; z-index: 60; min-width: 180px; box-shadow: 0 8px 24px rgba(0,0,0,0.4); }
    .settings-panel.hidden { display: none; }
    .settings-panel h3 { margin-bottom: 12px; font: 700 14px Rubik, sans-serif; color: #7bed9f; }
    .settings-panel label { display: block; margin-bottom: 8px; font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); cursor: pointer; }
    .settings-panel input[type="checkbox"] { margin-right: 8px; }
    .settings-slider-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
    .settings-slider-row label { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); white-space: nowrap; min-width: 90px; }
    .settings-slider { -webkit-appearance: none; appearance: none; flex: 1; height: 6px; border-radius: 3px; background: rgba(255,255,255,0.2); outline: none; cursor: pointer; }
    .settings-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; border-radius: 50%; background: #7bed9f; cursor: pointer; border: none; }
    .settings-slider::-moz-range-thumb { width: 16px; height: 16px; border-radius: 50%; background: #7bed9f; cursor: pointer; border: none; }
    .settings-fps-select { display: block; width: 100%; margin: 4px 0 12px 0; padding: 6px 8px; font: 600 13px Rubik, sans-serif; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: rgba(255,255,255,0.95); cursor: pointer; }
    .settings-exit-lobby { flex: 1; padding: 8px 12px; font: 600 13px Rubik, sans-serif; background: rgba(231,76,60,0.3); border: 1px solid #e74c3c; border-radius: 8px; color: #ff6b6b; cursor: pointer; }
    .settings-exit-lobby:hover { background: rgba(231,76,60,0.5); }
    .settings-close { flex: 1; padding: 6px 12px; font: 600 12px Rubik, sans-serif; background: rgba(123,237,159,0.2); border: 1px solid #7bed9f; color: #7bed9f; border-radius: 6px; cursor: pointer; }
    #minimap-wrap {
      position: absolute; top: 56px; right: 12px; width: 132px; height: 132px;
      background: linear-gradient(145deg, rgba(25,30,45,0.85), rgba(18,22,35,0.85));
      border: 2px solid rgba(255,255,255,0.15); border-radius: 10px;
      box-shadow: inset 0 2px 8px rgba(0,0,0,0.5), 0 4px 16px rgba(0,0,0,0.3);
      padding: 4px;
    }
    #minimap { width: 120px; height: 120px; border-radius: 6px; display: block; background: #2d4a2d; cursor: grab; opacity: 0.85; }
    #minimap:active { cursor: grabbing; }
    .event-toggle-btn {
      position: absolute; top: 56px; left: 12px; width: 36px; height: 36px;
      background: rgba(35,42,60,0.45); border: 1px solid rgba(94,234,212,0.5); border-radius: 8px;
      font-size: 18px; cursor: pointer; z-index: 50; display: flex; align-items: center;
      justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.2); padding: 0;
    }
    .event-toggle-btn.hidden { display: none; }
    #event-panel {
      position: absolute; top: 98px; left: 12px; max-width: 200px; max-height: 180px; overflow-y: auto;
      background: rgba(35,42,60,0.85); border: 2px solid #5eead4; border-radius: 10px; padding: 10px 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.4); z-index: 50;
    }
    #event-panel.hidden { display: none; }
    #event-panel .event-panel-title { font: 700 12px Rubik, sans-serif; color: #5eead4; margin-bottom: 8px; }
    #event-panel .event-item { background: rgba(0,0,0,0.25); border-radius: 6px; padding: 8px 10px; margin-bottom: 8px; }
    #event-panel .event-item:last-child { margin-bottom: 0; }
    #event-panel .event-name { font: 600 11px Rubik, sans-serif; color: #fff; margin-bottom: 4px; }
    #event-panel .event-reqs { font: 10px Rubik, sans-serif; color: rgba(255,255,255,0.8); margin-bottom: 2px; }
    #event-panel .event-time { font: 600 10px Rubik, sans-serif; color: #7bed9f; }
    .stats-toggle-btn {
      position: absolute; top: 56px; left: 12px; width: 36px; height: 36px;
      background: rgba(35,42,60,0.45); border: 1px solid rgba(94,234,212,0.5); border-radius: 8px;
      font-size: 16px; cursor: pointer; z-index: 51; display: flex; align-items: center;
      justify-content: center; box-shadow: 0 2px 8px rgba(0,0,0,0.2); padding: 0;
      color: rgba(94,234,212,0.7);
    }
    .stats-toggle-btn.hidden { display: none; }
    #stats-panel {
      position: absolute; top: 98px; left: 12px; min-width: 110px;
      background: rgba(35,42,60,0.45); border: 1px solid rgba(94,234,212,0.4); border-radius: 10px; padding: 8px 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.25); z-index: 51;
    }
    #stats-panel.hidden { display: none; }
    #stats-panel .stats-panel-title { font: 700 11px Rubik, sans-serif; color: rgba(94,234,212,0.7); margin-bottom: 6px; }
    #stats-panel .stats-row { font: 600 11px Rubik, sans-serif; color: rgba(255,255,255,0.7); margin-bottom: 3px; display: flex; justify-content: space-between; gap: 12px; }
    #stats-panel .stats-row:last-child { margin-bottom: 0; }
    #stats-panel .stats-label { color: rgba(255,255,255,0.4); }
    #stats-panel .stats-value { color: rgba(123,237,159,0.8); }
    .bottom-bar {
      position: absolute; bottom: 0; left: 0; right: 0; height: 72px;
      background: linear-gradient(0deg, rgba(30,35,50,0.4), rgba(22,26,38,0.4));
      border-top: 2px solid rgba(255,255,255,0.08);
      display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 6px;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.2);
    }
    #carried { font: 600 14px Rubik, sans-serif; color: #ffd93d; }
    #tag-cooldown { font: 600 12px Rubik, sans-serif; color: rgba(255,255,255,0.7); }
    .bottom-action-bar {
      position: absolute; bottom: 90px; right: 16px;
      display: flex; flex-direction: row; align-items: center; gap: 6px;
      z-index: 30;
    }
    .bottom-action-bar .hidden { display: none !important; }
    .ground-btn, .port-btn, .shelter-port-btn, .adopt-speed-btn, .transfer-btn, .center-van-btn, .center-shelter-btn, .build-shelter-btn {
      padding: 8px 12px; border-radius: 8px;
      font: 700 12px Rubik, sans-serif; cursor: pointer; border: 2px solid;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3); transition: all 0.15s;
      white-space: nowrap;
    }
    .ground-btn { background: #7bed9f; color: #1a1a2e; border-color: #5cd98b; }
    .ground-btn:hover { background: #5cd98b; transform: translateY(-2px); }
    .port-btn { background: rgba(60,40,80,0.85); color: #c77dff; border-color: #a855f7; }
    .port-btn:hover { background: rgba(80,50,100,0.9); transform: translateY(-2px); }
    .shelter-port-btn { background: rgba(20,60,50,0.85); color: #10b981; border-color: #047857; }
    .shelter-port-btn:hover { background: rgba(30,80,60,0.9); transform: translateY(-2px); }
    .adopt-speed-btn { background: rgba(80,50,20,0.85); color: #f59e0b; border-color: #d97706; }
    .adopt-speed-btn:hover { background: rgba(100,70,30,0.9); transform: translateY(-2px); }
    .adopt-speed-btn.active { background: rgba(120,80,30,0.95); border-color: #fbbf24; animation: adoptSpeedPulse 1s infinite; }
    @keyframes adoptSpeedPulse { 0%, 100% { box-shadow: 0 0 8px rgba(251,191,36,0.5); } 50% { box-shadow: 0 0 16px rgba(251,191,36,0.8); } }
    .transfer-btn { background: #3b82f6; color: #fff; border-color: #2563eb; }
    .transfer-btn:hover { background: #2563eb; transform: translateY(-2px); }
    .center-van-btn { border-color: #888; background: rgba(50,60,80,0.9); color: #fff; font-size: 11px; }
    .center-van-btn:hover { background: rgba(70,80,100,0.95); transform: translateY(-2px); }
    .center-shelter-btn { border-color: #7bed9f; background: rgba(50,80,60,0.9); color: #7bed9f; font-size: 11px; }
    .center-shelter-btn:hover { background: rgba(60,100,70,0.95); transform: translateY(-2px); }
    .build-shelter-btn { background: rgba(60,55,30,0.85); color: #ffd93d; border-color: #e6c235; }
    .build-shelter-btn:hover { background: rgba(80,70,40,0.9); transform: translateY(-2px); }
    .build-shelter-btn:disabled { background: rgba(50,50,50,0.7); border-color: #666; cursor: not-allowed; opacity: 0.6; color: #888; }
    @media (max-width: 768px) {
      .bottom-action-bar { gap: 4px; right: 8px; }
      .ground-btn, .port-btn, .shelter-port-btn, .adopt-speed-btn,
      .transfer-btn, .center-van-btn, .center-shelter-btn, .build-shelter-btn { padding: 6px 8px; font-size: 11px; }
    }
    .game-tokens { font: 700 14px Rubik, sans-serif; color: #ffd93d; margin-left: 12px; }
    #leaderboard {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: linear-gradient(145deg, rgba(35,42,60,0.98), rgba(25,30,45,0.98));
      border: 2px solid rgba(255,255,255,0.2); border-radius: 16px; padding: 28px 32px;
      font: 600 16px Rubik, sans-serif; color: #fff; display: none; min-width: 340px; max-width: 90%;
      box-shadow: 0 12px 40px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.08);
      z-index: 80; pointer-events: auto;
    }
    #leaderboard.show { display: block; }
    #leaderboard strong { display: block; margin-bottom: 16px; font-size: 20px; color: #7bed9f; }
    .match-ads { display: flex; gap: 12px; margin: 14px 0 10px; flex-wrap: wrap; }
    .match-ad-slot, .match-self-promo {
      flex: 1 1 200px; background: rgba(0,0,0,0.25); border: 1px solid rgba(255,255,255,0.15);
      border-radius: 10px; padding: 10px 12px; min-width: 180px;
    }
    .match-ad-slot h4, .match-self-promo h4 { font: 700 13px Rubik, sans-serif; color: #7bed9f; margin-bottom: 6px; }
    .match-ad-placeholder {
      height: 100px; border: 1px dashed rgba(255,255,255,0.2); border-radius: 8px;
      display: flex; align-items: center; justify-content: center; font: 600 12px Rubik, sans-serif;
      color: rgba(255,255,255,0.6); background: rgba(0,0,0,0.2);
    }
    .match-self-promo p { font: 600 12px/1.4 Rubik, sans-serif; color: rgba(255,255,255,0.85); }
    
    /* Breeder Mini-Game Modal */
    #breeder-minigame {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: linear-gradient(145deg, rgba(60,30,30,0.98), rgba(40,20,20,0.98));
      border: 3px solid #ff6b6b; border-radius: 16px; padding: 24px 28px;
      min-width: 340px; max-width: 90vw; max-height: 90vh; overflow-y: auto;
      font: 600 14px Rubik, sans-serif; color: #fff;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.08);
      z-index: 90; display: none;
    }
    #breeder-minigame.show { display: block; }
    .breeder-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .breeder-title { font: 700 18px Rubik, sans-serif; color: #ff6b6b; }
    .breeder-timer-area { display: flex; align-items: center; gap: 10px; }
    .breeder-timer { font: 700 16px Rubik, sans-serif; color: #ffd93d; }
    .breeder-retreat-btn {
      padding: 6px 12px; font: 600 12px Rubik, sans-serif; border-radius: 6px;
      cursor: pointer; border: 2px solid #7bed9f; background: rgba(123, 237, 159, 0.2);
      color: #7bed9f; transition: all 0.15s;
    }
    .breeder-retreat-btn:hover { background: rgba(123, 237, 159, 0.4); transform: scale(1.05); }
    .breeder-tokens { font: 600 14px Rubik, sans-serif; color: #7bed9f; margin-bottom: 12px; }
    .breeder-action-row { display: flex; gap: 10px; margin-bottom: 12px; align-items: center; }
    .instant-rescue-btn {
      flex: 1; padding: 10px 16px; font: 600 14px Rubik, sans-serif;
      background: linear-gradient(135deg, #f59e0b, #d97706); color: #fff;
      border: 2px solid #fbbf24; border-radius: 8px; cursor: pointer;
      transition: all 0.2s; box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
    }
    .instant-rescue-btn:hover:not(:disabled) { transform: scale(1.05); box-shadow: 0 4px 16px rgba(245, 158, 11, 0.5); }
    .instant-rescue-btn:disabled { opacity: 0.5; cursor: not-allowed; background: #666; border-color: #888; }
    .instant-rescue-btn.hidden { display: none; }
    .breeder-pets { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 16px; justify-content: center; }
    .breeder-pet {
      width: 60px; height: 60px; border-radius: 12px; display: flex; flex-direction: column;
      align-items: center; justify-content: center; background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.3); font-size: 28px; transition: all 0.2s; cursor: pointer;
    }
    .breeder-pet:hover:not(.rescued) { background: rgba(255,255,255,0.2); border-color: #ffd93d; transform: scale(1.05); }
    .breeder-pet.selected { border-color: #ffd93d; background: rgba(255,215,61,0.2); transform: scale(1.1); box-shadow: 0 0 12px rgba(255,215,61,0.4); }
    .breeder-pet.rescued { background: rgba(123,237,159,0.3); border-color: #7bed9f; opacity: 0.6; cursor: default; }
    .breeder-pet-label { font: 600 10px Rubik, sans-serif; color: rgba(255,255,255,0.8); margin-top: 2px; }
    .breeder-foods { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-bottom: 16px; }
    .breeder-food-btn {
      padding: 10px 14px; border-radius: 8px; font: 600 12px Rubik, sans-serif;
      cursor: pointer; border: 2px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1);
      color: #fff; transition: all 0.15s; display: flex; flex-direction: column; align-items: center;
    }
    .breeder-food-btn:hover { background: rgba(255,255,255,0.2); border-color: #ffd93d; }
    .breeder-food-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .breeder-food-btn .food-icon { font-size: 20px; margin-bottom: 4px; }
    .breeder-food-btn .food-cost { color: #ffd93d; font-size: 11px; }
    /* Ingredient display for meal building */
    .breeder-ingredients {
      display: flex; align-items: center; gap: 10px; margin-bottom: 12px;
      padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px;
      justify-content: center; flex-wrap: wrap;
    }
    .ingredients-label { font: 600 12px Rubik, sans-serif; color: rgba(255,255,255,0.9); }
    .ingredient-slots { display: flex; gap: 6px; }
    .ingredient-slot {
      width: 36px; height: 36px; border-radius: 8px; display: flex;
      align-items: center; justify-content: center; font-size: 20px;
      border: 2px dashed rgba(255,255,255,0.4); background: rgba(0,0,0,0.2);
    }
    .ingredient-slot.filled { border-style: solid; border-color: #7bed9f; background: rgba(123,237,159,0.2); }
    .ingredient-slot.empty { color: rgba(255,255,255,0.4); font-size: 16px; }
    .clear-ingredients-btn {
      padding: 6px 12px; border-radius: 6px; border: 1px solid rgba(255,100,100,0.5);
      background: rgba(255,100,100,0.2); color: #ff6b6b; font: 600 11px Rubik, sans-serif;
      cursor: pointer; transition: all 0.15s;
    }
    .clear-ingredients-btn:hover { background: rgba(255,100,100,0.3); }
    .breeder-result { text-align: center; margin-top: 16px; }
    .breeder-result.hidden { display: none; }
    .breeder-result-title { font: 700 16px Rubik, sans-serif; color: #7bed9f; margin-bottom: 8px; }
    .breeder-rewards { margin-top: 10px; }
    .breeder-reward-item { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); margin: 4px 0; }
    .breeder-close-btn {
      flex: 1; padding: 12px 16px; border-radius: 8px; font: 700 14px Rubik, sans-serif;
      cursor: pointer; border: none; background: #7bed9f; color: #1a1a2e; transition: all 0.15s;
    }
    .breeder-close-btn:hover { background: #5cd98b; }
    .breeder-close-btn.hidden { display: none; }
    
    /* Daily Gift Modal */
    #daily-gift-modal {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: linear-gradient(145deg, rgba(75,60,120,0.98), rgba(50,40,90,0.98));
      border: 3px solid #9b59b6; border-radius: 16px; padding: 20px 24px;
      min-width: 320px; max-width: 400px;
      font: 600 14px Rubik, sans-serif; color: #fff;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
      z-index: 95; display: none;
    }
    #daily-gift-modal.show { display: block; }
    .daily-gift-header { text-align: center; margin-bottom: 16px; }
    .daily-gift-title { font: 700 20px Rubik, sans-serif; color: #ffd93d; margin-bottom: 4px; }
    .daily-gift-subtitle { font: 600 13px Rubik, sans-serif; color: #9b59b6; }
    .daily-gift-grid {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 12px;
    }
    .daily-gift-day {
      background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2);
      border-radius: 10px; padding: 10px 8px; text-align: center; position: relative;
    }
    .daily-gift-day.current { border-color: #ffd93d; background: rgba(255,215,61,0.15); }
    .daily-gift-day.claimed { border-color: #7bed9f; background: rgba(123,237,159,0.15); opacity: 0.7; }
    .daily-gift-day.locked { opacity: 0.5; }
    .daily-gift-day-label { font: 700 11px Rubik, sans-serif; color: rgba(255,255,255,0.7); margin-bottom: 6px; }
    .daily-gift-day-icon { font-size: 24px; margin-bottom: 4px; }
    .daily-gift-day-reward { font: 600 10px Rubik, sans-serif; color: #ffd93d; }
    .daily-gift-day7 { grid-column: span 3; }
    .daily-gift-claim-btn {
      width: 100%; padding: 14px; border-radius: 10px; font: 700 15px Rubik, sans-serif;
      cursor: pointer; border: none; background: linear-gradient(135deg, #ffd93d, #f39c12);
      color: #1a1a2e; transition: all 0.15s; margin-top: 8px;
    }
    .daily-gift-claim-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255,215,61,0.4); }
    .daily-gift-claim-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .daily-gift-close {
      position: absolute; top: 10px; right: 14px; font-size: 20px; cursor: pointer;
      color: rgba(255,255,255,0.6); transition: color 0.15s;
    }
    .daily-gift-close:hover { color: #fff; }
    .daily-gift-signin { text-align: center; padding: 20px; }
    .daily-gift-signin a { color: #9b59b6; text-decoration: underline; }
    .daily-gift-signin-overlay { position: relative; z-index: 2; text-align: center; padding: 20px 10px; background: rgba(0,0,0,0.7); border-radius: 12px; margin-bottom: 12px; }
    .daily-gift-signin-message { font: 700 18px Rubik, sans-serif; color: #ffd93d; margin-bottom: 16px; }
    .daily-gift-signin-buttons { display: flex; flex-direction: column; gap: 10px; }
    .daily-gift-signin-btn { display: block; padding: 12px 20px; border-radius: 8px; font: 600 14px Rubik, sans-serif; text-decoration: none; text-align: center; transition: all 0.15s; }
    .daily-gift-signin-btn.google { background: #fff; color: #333; border: 1px solid #ddd; }
    .daily-gift-signin-btn.google:hover { background: #f5f5f5; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
    .daily-gift-signin-btn.facebook { background: #1877f2; color: #fff; }
    .daily-gift-signin-btn.facebook:hover { background: #166fe5; box-shadow: 0 2px 8px rgba(24,119,242,0.4); }
    .daily-gift-grid-greyed { opacity: 0.4; pointer-events: none; filter: grayscale(0.8); display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
    
    /* Leaderboard Modal */
    #leaderboard-modal {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: linear-gradient(145deg, rgba(35,90,80,0.98), rgba(25,60,55,0.98));
      border: 3px solid #7bed9f; border-radius: 16px; padding: 20px 24px;
      width: min(520px, 92vw); min-width: 280px; max-width: 92vw; box-sizing: border-box;
      font: 600 14px Rubik, sans-serif; color: #fff;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
      z-index: 95; display: none;
    }
    #leaderboard-modal.show { display: block; }
    .leaderboard-header { text-align: center; margin-bottom: 16px; }
    .leaderboard-title { font: 700 22px Rubik, sans-serif; color: #7bed9f; margin-bottom: 12px; }
    .leaderboard-tabs {
      display: flex; flex-wrap: nowrap; gap: 6px; justify-content: flex-start;
      overflow-x: auto; padding: 2px 2px 6px; -webkit-overflow-scrolling: touch;
    }
    .leaderboard-tabs::-webkit-scrollbar { height: 6px; }
    .leaderboard-tabs::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.25); border-radius: 6px; }
    .leaderboard-tabs::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); border-radius: 6px; }
    .leaderboard-tab {
      padding: 6px 12px; font: 600 12px Rubik, sans-serif; border-radius: 6px;
      border: 2px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.2);
      color: rgba(255,255,255,0.8); cursor: pointer; transition: all 0.15s;
      white-space: nowrap; flex: 0 0 auto;
    }
    .leaderboard-tab:hover { border-color: rgba(255,255,255,0.4); }
    .leaderboard-tab.active { border-color: #7bed9f; background: rgba(123,237,159,0.2); color: #7bed9f; }
    .leaderboard-sort { margin-top: 8px; display: flex; align-items: center; gap: 8px; justify-content: center; }
    .leaderboard-sort label { font-size: 12px; color: rgba(255,255,255,0.8); }
    .leaderboard-sort select { padding: 4px 8px; font-size: 12px; border-radius: 6px; background: rgba(0,0,0,0.3); color: #fff; border: 1px solid rgba(255,255,255,0.2); }
    .leaderboard-content { min-height: 140px; max-height: 320px; overflow-y: auto; margin-bottom: 12px; padding-right: 4px; -webkit-overflow-scrolling: touch; }
    .leaderboard-entry {
      display: flex; align-items: center; gap: 12px; padding: 10px 12px;
      background: rgba(255,255,255,0.05); border-radius: 8px; margin-bottom: 6px;
    }
    .leaderboard-entry.highlight { background: rgba(123,237,159,0.2); border: 1px solid #7bed9f; }
    .leaderboard-rank { font: 700 16px Rubik, sans-serif; color: #ffd93d; min-width: 28px; text-align: center; }
    .leaderboard-rank.gold { color: #ffd700; }
    .leaderboard-rank.silver { color: #c0c0c0; }
    .leaderboard-rank.bronze { color: #cd7f32; }
    .leaderboard-name { flex: 1; font: 600 14px Rubik, sans-serif; color: #fff; overflow: hidden; text-overflow: ellipsis; }
    .leaderboard-color { width: 16px; height: 16px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.3); flex-shrink: 0; }
    .leaderboard-stats { font: 600 12px Rubik, sans-serif; color: rgba(255,255,255,0.7); text-align: right; }
    .leaderboard-stats .wins { color: #7bed9f; font-weight: 700; }
    .leaderboard-my-rank { padding: 12px; background: rgba(0,0,0,0.2); border-radius: 8px; text-align: center; font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.8); }
    .leaderboard-close {
      position: absolute; top: 10px; right: 14px; font-size: 20px; cursor: pointer;
      color: rgba(255,255,255,0.6); transition: color 0.15s;
    }
    .leaderboard-close:hover { color: #fff; }
    .leaderboard-empty { text-align: center; padding: 30px 20px; color: rgba(255,255,255,0.6); }
    .leaderboard-sort.hidden { display: none; }
    .lobby-leaderboard-panel { margin-top: 20px; padding: 12px; background: rgba(0,0,0,0.25); border-radius: 10px; border: 1px solid rgba(255,255,255,0.15); }
    .lobby-leaderboard-title { font: 700 14px Rubik, sans-serif; color: #7bed9f; margin: 0 0 10px 0; }
    .lobby-leaderboard-content { min-height: 80px; max-height: 220px; overflow-y: auto; font-size: 12px; color: #fff; }
    .lobby-leaderboard-loading { color: rgba(255,255,255,0.6); padding: 8px 0; }
    .lobby-leaderboard-entry { display: flex; align-items: center; gap: 8px; padding: 6px 8px; border-radius: 6px; margin-bottom: 4px; background: rgba(255,255,255,0.06); }
    .lobby-leaderboard-entry.highlight { background: rgba(123,237,159,0.15); }
    .lobby-leaderboard-rank { font: 700 13px Rubik, sans-serif; color: #ffd93d; min-width: 22px; }
    .lobby-leaderboard-rank.gold { color: #ffd700; }
    .lobby-leaderboard-rank.silver { color: #c0c0c0; }
    .lobby-leaderboard-rank.bronze { color: #cd7f32; }
    .lobby-leaderboard-name { flex: 1; overflow: hidden; text-overflow: ellipsis; color: #fff; }
    .lobby-leaderboard-score { color: rgba(255,255,255,0.8); font-weight: 600; }
    .match-history-entry {
      display: grid; grid-template-columns: 80px 1fr auto auto auto auto;
      gap: 10px; align-items: center; padding: 10px 12px;
      background: rgba(255,255,255,0.05); border-radius: 8px; margin-bottom: 6px;
      font: 600 12px Rubik, sans-serif; color: rgba(255,255,255,0.9);
    }
    .match-history-result { font-weight: 700; }
    .match-history-result.history-win { color: #7bed9f; }
    .match-history-result.history-loss { color: #ff9f43; }
    .match-history-result.history-stray { color: #ff6b6b; }
    .match-history-result.history-quit { color: rgba(255,255,255,0.6); }
    .match-history-rt { color: #ffd93d; }
    .match-history-date { color: rgba(255,255,255,0.6); font-size: 11px; }
    
    #connection-overlay {
      position: fixed; inset: 0; background: rgba(26,26,46,0.95); display: flex; flex-direction: column;
      align-items: center; justify-content: center; padding: 24px; text-align: center; z-index: 100;
      font: 600 16px Rubik, sans-serif; color: #fff;
    }
    #connection-overlay.hidden { display: none; }
    #connection-overlay h2 { color: #7bed9f; margin-bottom: 12px; font-size: 22px; }
    #connection-overlay p { max-width: 420px; line-height: 1.5; margin-bottom: 8px; color: rgba(255,255,255,0.9); }
    #connection-overlay code { background: rgba(0,0,0,0.3); padding: 2px 8px; border-radius: 4px; font-size: 14px; }
    #connection-overlay .error { color: #ff6b6b; margin-top: 16px; }
    /* Item Selection Modal */
    #item-select-overlay {
      position: fixed; inset: 0; background: rgba(26,26,46,0.95); display: flex; flex-direction: column;
      align-items: center; justify-content: center; padding: 24px; text-align: center; z-index: 105;
      font: 600 16px Rubik, sans-serif; color: #fff;
    }
    #item-select-overlay.hidden { display: none; }
    .item-select-panel {
      background: rgba(30,40,60,0.95); border: 1px solid rgba(255,255,255,0.2); border-radius: 14px;
      padding: 24px 28px; max-width: 380px; width: 100%;
    }
    .item-select-title { font: 700 18px Rubik, sans-serif; color: #ffd93d; margin-bottom: 6px; }
    .item-select-subtitle { font: 400 12px Rubik, sans-serif; color: rgba(255,255,255,0.6); margin-bottom: 18px; }
    .item-select-row {
      display: flex; align-items: center; justify-content: space-between;
      padding: 10px 12px; margin-bottom: 8px; border-radius: 8px;
      background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1);
    }
    .item-select-row.hidden { display: none; }
    .item-select-info { display: flex; align-items: center; gap: 10px; }
    .item-select-icon { font-size: 20px; }
    .item-select-name { font: 600 13px Rubik, sans-serif; color: #fff; }
    .item-select-avail { font: 400 11px Rubik, sans-serif; color: rgba(255,255,255,0.5); margin-left: 4px; }
    .item-select-controls { display: flex; align-items: center; gap: 6px; }
    .item-select-controls button {
      width: 28px; height: 28px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.25);
      background: rgba(255,255,255,0.08); color: #fff; font: 700 16px Rubik, sans-serif;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
    }
    .item-select-controls button:hover { background: rgba(255,255,255,0.18); border-color: #7bed9f; }
    .item-select-controls button:disabled { opacity: 0.3; cursor: not-allowed; }
    .item-select-qty { font: 700 14px Rubik, sans-serif; color: #7bed9f; min-width: 20px; text-align: center; }
    .item-select-actions { display: flex; gap: 10px; margin-top: 18px; }
    .item-select-confirm {
      flex: 1; padding: 12px; border-radius: 8px; border: none;
      background: linear-gradient(135deg, #7bed9f, #50c878); color: #1a1a2e;
      font: 700 14px Rubik, sans-serif; cursor: pointer; transition: transform 0.1s, box-shadow 0.15s;
    }
    .item-select-confirm:hover { transform: scale(1.03); box-shadow: 0 4px 16px rgba(123,237,159,0.3); }
    .item-select-skip {
      flex: 1; padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.25);
      background: transparent; color: rgba(255,255,255,0.7);
      font: 600 13px Rubik, sans-serif; cursor: pointer;
    }
    .item-select-skip:hover { border-color: rgba(255,255,255,0.5); color: #fff; }
    .toast {
      position: fixed; top: 20px; left: 50%; transform: translateX(-50%) translateY(-100px);
      background: rgba(255, 100, 100, 0.95); color: #fff; padding: 12px 24px;
      border-radius: 8px; font: 600 14px Rubik, sans-serif; z-index: 200;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3); transition: transform 0.3s ease;
      pointer-events: none;
    }
    .toast.show { transform: translateX(-50%) translateY(0); pointer-events: auto; }
    .toast a { color: #fff; text-decoration: underline; cursor: pointer; }
    #how-to-play {
      position: fixed; bottom: 80px; right: 12px; width: 280px;
      background: rgba(245,245,245,0.97); border: 3px solid #444; border-radius: 6px;
      padding: 0; font: 400 13px Arial, sans-serif; color: #333;
      line-height: 1.5; z-index: 50; box-shadow: 0 4px 16px rgba(0,0,0,0.25);
      overflow: hidden;
    }
    #how-to-play.hidden { display: none; }
    #how-to-play .htp-header {
      background: #7bed9f; color: #1a1a2e; font-weight: 700; font-size: 16px;
      padding: 10px 14px; border-bottom: 2px solid #444;
    }
    #how-to-play .htp-content { padding: 12px 14px; }
    #how-to-play h4 { margin: 0 0 8px 0; font-size: 15px; color: #222; font-weight: 700; }
    #how-to-play p { margin: 0 0 12px 0; font-size: 13px; color: #444; }
    #how-to-play .htp-controls { margin-top: 8px; }
    #how-to-play .htp-controls h4 { margin-bottom: 6px; }
    #how-to-play .htp-key { 
      display: inline-block; background: #ddd; border: 1px solid #999; border-radius: 4px;
      padding: 2px 8px; font-family: monospace; font-weight: 700; margin: 2px;
    }
    #how-to-play .htp-close {
      position: absolute; top: 8px; right: 10px; background: none; border: none;
      font-size: 18px; cursor: pointer; color: #1a1a2e; font-weight: 700;
    }
    #how-to-play strong { color: #2d8a4e; }
    /* Landing screen */
    #landing {
      position: fixed; inset: 0; background: #1a1a2e; z-index: 90;
      display: flex; flex-direction: column; overflow: auto;
      touch-action: auto; -webkit-overflow-scrolling: touch;
    }
    #landing.hidden { display: none; }
    .landing-top {
      display: flex; align-items: center; justify-content: space-between; padding: 12px 20px;
      background: linear-gradient(180deg, rgba(30,35,50,0.97), rgba(22,26,38,0.97));
      border-bottom: 2px solid rgba(255,255,255,0.12);
    }
    .landing-top .logo { font: 700 20px/1 Rubik, sans-serif; color: #7bed9f; letter-spacing: 0.08em; }
    .landing-top .logo .logo-icon { display: none; }
    .landing-top .policy-links { display: flex; gap: 16px; flex-wrap: wrap; }
    .landing-top .policy-links a { font: 600 12px/1 Rubik, sans-serif; color: rgba(255,255,255,0.8); text-decoration: none; }
    .landing-top .policy-links a:hover { color: #7bed9f; }
    .landing-main {
      flex: 1; display: flex; align-items: stretch; justify-content: center; gap: 24px; padding: 24px;
      flex-wrap: wrap;
    }
    .landing-left, .landing-center, .landing-right {
      background: rgba(35,42,60,0.6); border: 2px solid rgba(255,255,255,0.12); border-radius: 12px;
      padding: 20px; min-width: 200px;
    }
    .landing-left { max-width: 240px; }
    .landing-center { flex: 1; max-width: 420px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
    .landing-right { max-width: 260px; }
    /* Mobile: reorder landing sections - play at top, player below, how-to at bottom */
    @media (max-width: 768px) {
      .landing-main { flex-direction: column; }
      .landing-center { order: 1; max-width: 100%; width: 100%; }
      .landing-left { order: 2; max-width: 100%; width: 100%; }
      .landing-right { order: 3; max-width: 100%; width: 100%; }
      /* Mobile header: show logo icon instead of text, right-justify nav */
      .landing-top .logo { font-size: 0; display: flex; align-items: center; }
      .landing-top .logo .logo-icon { display: block; width: 28px; height: 28px; }
      .landing-top .policy-links { justify-content: flex-end; margin-left: auto; }
    }
    .game-mode-center { margin-top: 16px; text-align: center; }
    .game-mode-center h3 { font: 700 14px Rubik, sans-serif; color: #7bed9f; margin-bottom: 10px; }
    .game-mode-center .mode-buttons { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
    .game-mode-center .mode-option {
      padding: 10px 18px; font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9);
      background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; cursor: pointer;
    }
    .game-mode-center .mode-option:hover { border-color: rgba(255,255,255,0.4); }
    .game-mode-center .mode-option.selected { border-color: #7bed9f; background: rgba(123,237,159,0.15); color: #7bed9f; }
    .solo-options { margin-top: 12px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px; }
    .solo-options.hidden { display: none; }
    .solo-option-label { font: 400 12px Rubik, sans-serif; color: rgba(255,255,255,0.85); cursor: pointer; display: flex; align-items: center; gap: 8px; }
    .solo-option-label input[type="checkbox"] { width: 16px; height: 16px; cursor: pointer; }
    .howto-text { font: 400 12px Rubik, sans-serif; color: rgba(255,255,255,0.85); line-height: 1.5; margin: 0 0 10px 0; }
    .howto-text strong { color: #7bed9f; }
    .howto-subtitle { font: 600 13px Rubik, sans-serif; color: #7bed9f; margin: 12px 0 6px 0; }
    .howto-keys .key {
      display: inline-block; background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); border-radius: 4px;
      padding: 2px 8px; font-family: monospace; font-weight: 700; font-size: 11px; margin: 2px; color: #fff;
    }
    .howto-text .orb {
      display: inline-block; width: 10px; height: 10px; border-radius: 50%; vertical-align: middle; margin-right: 3px;
    }
    .howto-text .orb.green { background: #7bed9f; }
    .howto-text .orb.blue { background: #70a3ff; }
    .howto-text .orb.purple { background: #c77dff; }
    .landing-left h3, .landing-right h3 { font: 700 14px Rubik, sans-serif; color: #7bed9f; margin-bottom: 12px; }
    .landing-profile-name { font: 600 16px/1 Rubik, sans-serif; color: #fff; margin-bottom: 8px; }
    .landing-profile-avatar { width: 56px; height: 56px; border-radius: 50%; background: rgba(123,237,159,0.2); border: 2px solid #7bed9f; margin-bottom: 12px; display: flex; align-items: center; justify-content: center; font: 700 24px Rubik, sans-serif; color: #7bed9f; }
    .landing-center .title { font: 700 28px/1 Rubik, sans-serif; color: #7bed9f; margin-bottom: 16px; letter-spacing: 0.05em; }
    .nick-row { margin-bottom: 12px; }
    .nick-row label { font: 600 12px Rubik, sans-serif; color: rgba(255,255,255,0.8); display: block; margin-bottom: 4px; }
    .nick-row .nick-input-wrap { display: flex; gap: 6px; align-items: center; }
    .nick-row input { padding: 8px 12px; border-radius: 8px; border: 2px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.3); color: #fff; font: 600 14px Rubik, sans-serif; width: 100%; min-width: 0; transition: border-color 0.2s; touch-action: auto; -webkit-user-select: text; user-select: text; }
    .nick-row input:focus { border-color: #7bed9f; outline: none; }
    .nick-row .nick-save-btn { padding: 8px 12px; background: #7bed9f; color: #1a1a2e; border: none; border-radius: 8px; font: 600 12px Rubik, sans-serif; cursor: pointer; transition: background 0.2s; white-space: nowrap; }
    .nick-row .nick-save-btn:hover { background: #9bffbf; }
    .nick-row .nick-save-btn.saved { background: #5cb85c; }
    .nick-row .nick-hint { font: 400 10px Rubik, sans-serif; color: rgba(255,255,255,0.5); margin-top: 4px; }
    .landing-music-row { margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
    .landing-music-row label { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); white-space: nowrap; }
    .music-slider { -webkit-appearance: none; appearance: none; width: 100%; height: 6px; border-radius: 3px; background: rgba(255,255,255,0.2); outline: none; cursor: pointer; }
    .music-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; border-radius: 50%; background: #7bed9f; cursor: pointer; border: none; }
    .music-slider::-moz-range-thumb { width: 16px; height: 16px; border-radius: 50%; background: #7bed9f; cursor: pointer; border: none; }
    .live-matches-section { margin-top: 16px; text-align: center; }
    .live-matches-section h3 { font: 700 14px Rubik, sans-serif; color: #7bed9f; margin-bottom: 10px; }
    .live-matches-list { max-height: 200px; overflow-y: auto; display: flex; flex-direction: column; gap: 6px; scrollbar-width: thin; scrollbar-color: rgba(123,237,159,0.4) transparent; }
    .live-matches-list::-webkit-scrollbar { width: 6px; }
    .live-matches-list::-webkit-scrollbar-track { background: transparent; }
    .live-matches-list::-webkit-scrollbar-thumb { background: rgba(123,237,159,0.4); border-radius: 3px; }
    .live-matches-empty { font: 400 12px Rubik, sans-serif; color: rgba(255,255,255,0.5); padding: 12px; }
    .live-match-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; transition: border-color 0.2s; }
    .live-match-item:hover { border-color: rgba(123,237,159,0.4); }
    .live-match-info { display: flex; align-items: center; gap: 8px; }
    .live-match-mode { font: 700 11px Rubik, sans-serif; color: #7bed9f; text-transform: uppercase; background: rgba(123,237,159,0.15); padding: 2px 8px; border-radius: 4px; }
    .live-match-players { font: 400 11px Rubik, sans-serif; color: rgba(255,255,255,0.7); }
    .live-match-time { font: 400 11px Rubik, sans-serif; color: rgba(255,255,255,0.5); }
    .live-match-bot-badge { font: 600 9px Rubik, sans-serif; color: #ff9f43; background: rgba(255,159,67,0.15); padding: 1px 6px; border-radius: 3px; }
    .live-match-watch { padding: 4px 14px; font: 600 11px Rubik, sans-serif; background: rgba(123,237,159,0.2); color: #7bed9f; border: 1px solid rgba(123,237,159,0.4); border-radius: 6px; cursor: pointer; transition: background 0.2s; }
    .live-match-watch:hover { background: rgba(123,237,159,0.4); }
    .live-match-join { padding: 4px 14px; font: 600 11px Rubik, sans-serif; background: rgba(255,159,67,0.2); color: #ff9f43; border: 1px solid rgba(255,159,67,0.4); border-radius: 6px; cursor: pointer; transition: background 0.2s; }
    .live-match-join:hover { background: rgba(255,159,67,0.4); }
    .live-match-waiting { font: 400 10px Rubik, sans-serif; color: rgba(255,159,67,0.7); font-style: italic; }
    .landing-center .play-btn { padding: 14px 48px; font: 700 18px Rubik, sans-serif; background: #7bed9f; color: #1a1a2e; border: none; border-radius: 10px; cursor: pointer; margin: 16px 0; box-shadow: 0 4px 16px rgba(123,237,159,0.4); }
    .landing-center .play-btn:hover { background: #9bffbf; }
    .landing-center .resume-btn { background: transparent; color: #7bed9f; border: 2px solid #7bed9f; margin-bottom: 4px; }
    .landing-center .resume-btn:hover { background: rgba(123,237,159,0.2); }
    #resume-match-btn.hidden { display: none; }
    #active-matches-container { max-height: 150px; overflow-y: auto; margin-bottom: 8px; width: 100%; }
    #active-matches-container.hidden { display: none; }
    #active-matches-list { display: flex; flex-direction: column; gap: 6px; }
    .active-match-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; background: rgba(0,0,0,0.3); border: 2px solid rgba(123,237,159,0.5); border-radius: 8px; cursor: pointer; font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); }
    .active-match-item:hover { background: rgba(123,237,159,0.15); border-color: #7bed9f; }
    .active-match-item .match-info { display: flex; align-items: center; gap: 8px; }
    .active-match-item .match-mode { font-size: 11px; text-transform: uppercase; color: #7bed9f; background: rgba(123,237,159,0.2); padding: 2px 6px; border-radius: 4px; }
    .active-match-item .match-id { color: rgba(255,255,255,0.7); }
    .active-match-item .match-time { font-variant-numeric: tabular-nums; color: #7bed9f; }
    .active-match-item .match-paused { color: #ffa502; font-size: 11px; }
    .landing-center .auth-buttons { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin: 12px 0; }
    .landing-center .auth-buttons a { font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); text-decoration: none; padding: 8px 16px; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; }
    .landing-center .auth-buttons a:hover { border-color: #7bed9f; color: #7bed9f; }
    .landing-center .hint { font: 600 12px/1.4 Rubik, sans-serif; color: rgba(255,255,255,0.7); margin-top: 16px; max-width: 320px; }
    .landing-right .mode-option { display: block; margin-bottom: 10px; padding: 10px 14px; border-radius: 8px; border: 2px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.2); cursor: pointer; font: 600 13px Rubik, sans-serif; color: rgba(255,255,255,0.9); text-align: left; }
    .landing-right .mode-option:hover { border-color: rgba(255,255,255,0.4); }
    .landing-right .mode-option.selected { border-color: #7bed9f; background: rgba(123,237,159,0.15); color: #7bed9f; }
    .referral-panel { margin-top: 16px; padding: 12px; background: rgba(0,0,0,0.25); border: 1px solid rgba(255,255,255,0.15); border-radius: 10px; }
    .color-selector { margin-top: 16px; }
    .color-selector h4 { font: 600 12px Rubik, sans-serif; color: rgba(255,255,255,0.8); margin-bottom: 8px; }
    .color-free { display: flex; gap: 8px; margin-bottom: 10px; }
    .color-btn { width: 32px; height: 32px; border-radius: 6px; border: 2px solid rgba(255,255,255,0.3); cursor: pointer; transition: all 0.15s; }
    .color-btn:hover { transform: scale(1.1); }
    .color-btn.selected { border-color: #fff; box-shadow: 0 0 8px rgba(255,255,255,0.5); }
    .color-premium { display: flex; flex-direction: column; gap: 6px; }
    .color-buy { padding: 6px 10px; font: 600 11px Rubik, sans-serif; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: rgba(255,255,255,0.9); cursor: pointer; text-align: left; }
    .color-buy:hover { border-color: rgba(255,255,255,0.4); }
    .color-buy:disabled { opacity: 0.5; cursor: not-allowed; }
    .color-buy.unlocked { border-color: #7bed9f; color: #7bed9f; }
    .color-picker-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 150; }
    .color-picker-modal.hidden { display: none; }
    .color-picker-content { background: rgba(35,42,60,0.98); border: 2px solid rgba(255,255,255,0.2); border-radius: 12px; padding: 20px; max-width: 320px; }
    .color-picker-content h3 { font: 700 16px Rubik, sans-serif; color: #7bed9f; margin-bottom: 12px; }
    .color-picker-content input[type="color"] { width: 100%; height: 50px; border: none; border-radius: 8px; cursor: pointer; margin-bottom: 12px; }
    .color-picker-btns { display: flex; gap: 10px; justify-content: flex-end; }
    .color-picker-btns button { padding: 8px 16px; font: 600 13px Rubik, sans-serif; border-radius: 8px; cursor: pointer; border: none; }
    .color-picker-cancel { background: rgba(255,255,255,0.2); color: #fff; }
    .color-picker-confirm { background: #7bed9f; color: #1a1a2e; }
    .preset-colors { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; margin-top: 8px; }
    .preset-color { width: 36px; height: 36px; border-radius: 6px; border: 2px solid rgba(255,255,255,0.3); cursor: pointer; }
    .preset-color:hover { transform: scale(1.1); }
    .preset-color.selected { border-color: #fff; }
    .referral-panel h4 { font: 700 13px Rubik, sans-serif; color: #7bed9f; margin-bottom: 8px; }
    .referral-status { font: 600 12px/1.4 Rubik, sans-serif; color: rgba(255,255,255,0.85); margin-bottom: 8px; }
    .referral-link { font: 600 11px/1.4 Rubik, sans-serif; color: rgba(255,255,255,0.7); word-break: break-all; margin-bottom: 8px; }
    .referral-btn { padding: 8px 10px; font: 600 12px Rubik, sans-serif; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3); background: rgba(0,0,0,0.3); color: #fff; cursor: pointer; width: 100%; }
    .referral-btn:hover { border-color: #7bed9f; color: #7bed9f; }
    .referral-hidden { display: none; }
    .landing-shop { margin-top: 16px; }
    .boost-section { margin-bottom: 12px; }
    .boost-header { font: 600 11px Rubik, sans-serif; color: rgba(255,255,255,0.6); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px; }
    .karma-display { display: flex; align-items: center; gap: 6px; font: 600 14px Rubik, sans-serif; color: #fbbf24; margin-bottom: 12px; padding: 8px 12px; background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(245,158,11,0.1)); border: 1px solid rgba(251,191,36,0.3); border-radius: 8px; }
    .karma-display.hidden { display: none; }
    .karma-icon { font-size: 16px; }
    .karma-label { color: rgba(255,255,255,0.8); }
    .karma-value { font-size: 18px; font-weight: 700; color: #fbbf24; }
    .karma-suffix { color: rgba(255,255,255,0.6); font-size: 12px; }
    .karma-shop { margin-bottom: 12px; }
    .karma-shop.hidden { display: none; }
    .karma-shop-item { display: flex; align-items: center; gap: 8px; padding: 8px 12px; background: linear-gradient(135deg, rgba(251,191,36,0.1), rgba(168,85,247,0.1)); border: 1px solid rgba(251,191,36,0.2); border-radius: 8px; }
    .karma-shop-icon { font-size: 18px; }
    .karma-shop-info { flex: 1; }
    .karma-shop-name { font: 600 13px Rubik, sans-serif; color: #e0e0e0; }
    .karma-shop-desc { font: 400 11px Rubik, sans-serif; color: rgba(255,255,255,0.5); margin-top: 2px; }
    .karma-shop-btn { font: 600 12px Rubik, sans-serif; padding: 5px 12px; border: none; border-radius: 6px; cursor: pointer; background: linear-gradient(135deg, #fbbf24, #f59e0b); color: #1a1a2e; transition: opacity 0.2s; }
    .karma-shop-btn:hover:not(:disabled) { opacity: 0.85; }
    .karma-shop-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .karma-shop-owned { font: 600 12px Rubik, sans-serif; color: #4ade80; padding: 5px 12px; }
    .karma-shop-owned.hidden { display: none; }
    .karma-shop-btn.hidden { display: none; }
    .equipment-panel { background: rgba(0,0,0,0.25); border: 1px solid rgba(255,255,255,0.15); border-radius: 10px; padding: 12px; margin-bottom: 12px; }
    .server-clock-wrap { margin-bottom: 12px; padding: 8px 10px; background: rgba(0,0,0,0.2); border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); font-size: 12px; }
    .server-clock-label { color: rgba(255,255,255,0.6); margin-bottom: 4px; }
    .server-clock-time { font: 600 13px Rubik, sans-serif; color: #5eead4; }
    .server-clock-next-gift { margin-top: 4px; color: rgba(255,255,255,0.8); }
    .equipment-header { font: 700 13px Rubik, sans-serif; color: #ffd93d; margin-bottom: 10px; text-align: center; }
    .equipment-items-compact { display: flex; flex-direction: column; gap: 6px; }
    .equip-row-tokens { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 6px 10px; border-radius: 8px; background: rgba(255,255,255,0.05); cursor: pointer; position: relative; transition: background 0.15s; }
    .equip-row-tokens:hover { background: rgba(255,255,255,0.12); }
    .equip-row-tokens .equip-icon { font-size: 16px; }
    .equip-row-tokens .equip-value { font: 700 15px Rubik, sans-serif; color: #7bed9f; }
    .equip-row-boosts { display: flex; justify-content: space-around; gap: 4px; }
    .equip-item { display: flex; flex-direction: column; align-items: center; gap: 1px; padding: 4px 8px; border-radius: 6px; background: rgba(255,255,255,0.05); cursor: pointer; position: relative; transition: background 0.15s; flex: 1; }
    .equip-item:hover { background: rgba(255,255,255,0.12); }
    .equip-icon { font-size: 14px; }
    .equip-value { font: 700 11px Rubik, sans-serif; color: #7bed9f; }
    .equip-row-tokens[data-tooltip]:hover::after, .equip-item[data-tooltip]:hover::after { content: attr(data-tooltip); position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); padding: 6px 10px; background: rgba(20,25,40,0.95); color: #fff; font: 500 11px Rubik, sans-serif; border-radius: 6px; white-space: nowrap; z-index: 100; margin-bottom: 6px; border: 1px solid rgba(255,255,255,0.15); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
    .equip-row-tokens[data-tooltip]:hover::before, .equip-item[data-tooltip]:hover::before { content: ''; position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); border: 6px solid transparent; border-top-color: rgba(20,25,40,0.95); margin-bottom: -6px; z-index: 101; }
    .equipment-note { font: 400 10px Rubik, sans-serif; color: rgba(255,255,255,0.5); text-align: center; margin-top: 8px; }
    .equipment-note.signed-in { color: #7bed9f; }
    .landing-buy { display: block; width: 100%; margin-bottom: 6px; padding: 8px 10px; font: 600 12px Rubik, sans-serif; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: #fff; cursor: pointer; }
    .landing-buy:hover { border-color: #7bed9f; color: #7bed9f; }
    .landing-buy:disabled { opacity: 0.5; cursor: not-allowed; }
    .lobby-bottom-buttons { display: flex; gap: 8px; margin-top: 12px; }
    .lobby-btn { flex: 1; padding: 12px 14px; font: 700 13px Rubik, sans-serif; border-radius: 8px; color: #fff; cursor: pointer; transition: all 0.15s; border: 2px solid; }
    .lobby-btn:hover { transform: translateY(-2px); }
    .lobby-btn.gift-btn { background: linear-gradient(135deg, #9b59b6, #8e44ad); border-color: #ffd93d; }
    .lobby-btn.gift-btn:hover { box-shadow: 0 4px 12px rgba(155,89,182,0.4); }
    .lobby-btn.gift-btn.hidden { display: none; }
    .lobby-btn.gift-btn.has-gift { animation: pulse-gift 1.5s infinite; }
    @keyframes pulse-gift { 0%, 100% { box-shadow: 0 0 0 0 rgba(255,215,61,0.5); } 50% { box-shadow: 0 0 0 8px rgba(255,215,61,0); } }
    .lobby-btn.leaderboard-btn { background: linear-gradient(135deg, #3498db, #2980b9); border-color: #7bed9f; }
    .lobby-btn.leaderboard-btn:hover { box-shadow: 0 4px 12px rgba(52,152,219,0.4); }
    #cookie-banner {
      position: fixed; bottom: 0; left: 0; right: 0; z-index: 200;
      background: rgba(30,35,50,0.98); border-top: 2px solid rgba(255,255,255,0.15);
      padding: 14px 20px; display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 12px;
      font: 600 13px/1.4 Rubik, sans-serif; color: rgba(255,255,255,0.9);
    }
    #cookie-banner.hidden { display: none; }
    #cookie-banner a { color: #7bed9f; text-decoration: none; }
    #cookie-banner a:hover { text-decoration: underline; }
    #cookie-banner .cookie-btns { display: flex; gap: 10px; margin-left: 8px; }
    #cookie-banner button { padding: 8px 16px; font: 600 12px Rubik, sans-serif; border-radius: 8px; cursor: pointer; border: none; }
    #cookie-banner .cookie-accept { background: #7bed9f; color: #1a1a2e; }
    #cookie-banner .cookie-essential { background: rgba(255,255,255,0.2); color: #fff; border: 1px solid rgba(255,255,255,0.4); }
  </style>
</head>
<body>
  <div id="cookie-banner" class="hidden">
    <span>We use cookies for session and preferences. <a href="privacy.html">Privacy Policy</a> <a href="cookies.html">Cookie Policy</a>.</span>
    <span class="cookie-btns"><button type="button" id="cookie-accept" class="cookie-accept">Accept</button><button type="button" id="cookie-essential" class="cookie-essential">Essential only</button></span>
  </div>
  
  <!-- Daily Gift Modal -->
  <div id="daily-gift-modal">
    <span class="daily-gift-close" id="daily-gift-close">&times;</span>
    <div class="daily-gift-header">
      <div class="daily-gift-title">Daily Gift</div>
      <div class="daily-gift-subtitle" id="daily-gift-subtitle">New calendar started!</div>
    </div>
    <div class="daily-gift-grid" id="daily-gift-grid">
      <!-- Days will be populated by JavaScript -->
    </div>
    <button type="button" class="daily-gift-claim-btn" id="daily-gift-claim-btn">Claim Today's Gift</button>
  </div>
  
  <!-- Leaderboard Modal -->
  <div id="leaderboard-modal">
    <span class="leaderboard-close" id="leaderboard-close">&times;</span>
    <div class="leaderboard-header">
      <div class="leaderboard-title">Leaderboard</div>
      <div class="leaderboard-tabs">
        <button type="button" class="leaderboard-tab active" data-type="alltime">All-Time</button>
        <button type="button" class="leaderboard-tab" data-type="daily">Today</button>
        <button type="button" class="leaderboard-tab" data-type="weekly">Weekly</button>
        <button type="button" class="leaderboard-tab" data-type="season">Season</button>
        <button type="button" class="leaderboard-tab" data-type="games">Games</button>
        <button type="button" class="leaderboard-tab" data-type="history">Match History</button>
      </div>
      <div class="leaderboard-sort">
        <label for="leaderboard-sort">Sort by:</label>
        <select id="leaderboard-sort">
          <option value="score">Score</option>
          <option value="wins">Wins</option>
          <option value="losses">Losses</option>
          <option value="games">Games played</option>
        </select>
      </div>
    </div>
    <div class="leaderboard-content" id="leaderboard-content">
      <!-- Leaderboard entries will be populated by JavaScript -->
    </div>
    <div class="leaderboard-my-rank" id="leaderboard-my-rank"></div>
  </div>
  
  <div id="landing">
    <header class="landing-top">
      <span class="logo"><img src="favicon.svg" alt="Adoptar.io" class="logo-icon" />Adoptar.io</span>
      <nav class="policy-links">
        <a href="privacy.html">Privacy</a>
        <a href="cookies.html">Cookies</a>
        <a href="terms.html">Terms</a>
        <a href="contact.html">Contact</a>
        <a href="privacy-settings.html">Privacy settings</a>
        <a href="https://iogames.party/">IO Party</a>
        <a href="https://iogames.space/games/adoptario">IO Space</a>
      </nav>
    </header>
    <main class="landing-main">
      <aside class="landing-left">
        <div id="landing-profile-avatar" class="landing-profile-avatar" aria-hidden="true">?</div>
        <div id="landing-profile-name" class="landing-profile-name">Guest</div>
        <p class="landing-guest-hint" style="font-size:11px;color:rgba(255,255,255,0.7);margin-bottom:12px">Play to earn Rescue Tokens. Boosts apply this match. Sign in to save progress.</p>
        <div id="landing-profile-actions"></div>
        <div class="nick-row">
          <label for="landing-nick">Your Nickname (change anytime!)</label>
          <div class="nick-input-wrap">
            <input type="text" id="landing-nick" placeholder="Enter nickname..." maxlength="20" autocomplete="off" />
            <button type="button" id="nick-save-btn" class="nick-save-btn">Save</button>
          </div>
          <div id="nick-hint" class="nick-hint"></div>
        </div>
        <div class="landing-music-row">
          <label for="landing-music-slider">Music</label>
          <input type="range" id="landing-music-slider" min="0" max="100" value="100" class="music-slider" />
        </div>
        <button type="button" id="friends-panel-btn" class="friends-panel-btn hidden" title="Friends & Foes">Friends</button>
        <div class="landing-shop">
          <!-- Karma Points (shared across games) -->
          <div id="karma-display" class="karma-display hidden">
            <span class="karma-icon"></span>
            <span class="karma-label">Karma:</span>
            <span class="karma-value" id="karma-points">0</span>
            <span class="karma-suffix">KP</span>
          </div>
          
          <!-- Karma Shop (Van Lure) -->
          <div id="karma-shop" class="karma-shop hidden">
            <div class="karma-shop-item">
              <span class="karma-shop-icon"></span>
              <div class="karma-shop-info">
                <div class="karma-shop-name">Van Lure</div>
                <div class="karma-shop-desc">Extended pet pickup radius (permanent)</div>
                <span class="karma-shop-owned hidden" id="van-lure-owned">Owned</span>
              </div>
              <button type="button" class="karma-shop-btn" id="buy-van-lure-btn">5 KP</button>
            </div>
          </div>
          
          <!-- Equipment Panel (all RT available for next match) -->
          <div class="equipment-panel">
            <div class="equipment-header">Equipment Chest</div>
            <div class="equipment-items-compact">
              <div class="equip-row-tokens" data-tooltip="Rescue Tokens - Currency for boosts and upgrades">
                <span class="equip-icon"></span>
                <span class="equip-value" id="equip-rt">0</span>
              </div>
              <div class="equip-row-boosts">
                <div class="equip-item" data-tooltip="Teleport Charges - Random teleport on the map">
                  <span class="equip-icon"></span>
                  <span class="equip-value" id="equip-ports">0</span>
                </div>
                <div class="equip-item" data-tooltip="Speed Boost - Faster van movement next match">
                  <span class="equip-icon"></span>
                  <span class="equip-value" id="equip-speed">0</span>
                </div>
                <div class="equip-item" data-tooltip="Size Bonus - Start with extra van capacity">
                  <span class="equip-icon"></span>
                  <span class="equip-value" id="equip-size">0</span>
                </div>
                <div class="equip-item" data-tooltip="Adopt Speed Boosts - Faster adoptions (use in-match)">
                  <span class="equip-icon"></span>
                  <span class="equip-value" id="equip-adopt-speed">0</span>
                </div>
              </div>
            </div>
            <div class="equipment-note" id="equip-note">Sign in to save equipment</div>
          </div>
          
          <!-- Pre-match Boosts -->
          <div class="boost-section">
            <div class="boost-header">Pre-Match Boosts</div>
            <button type="button" class="landing-buy" data-boost="size" id="buy-size-btn">Buy +1 Size (50 RT)</button>
            <button type="button" class="landing-buy" data-boost="speed">Buy Speed Boost (30 RT)</button>
          </div>
        </div>
        <div class="color-selector">
          <h4>Shelter Color</h4>
          <div class="color-free">
            <button type="button" class="color-btn selected" data-color="#7bed9f" style="background:#7bed9f" title="Green"></button>
            <button type="button" class="color-btn" data-color="#70a3ff" style="background:#70a3ff" title="Blue"></button>
            <button type="button" class="color-btn" data-color="#ff9f43" style="background:#ff9f43" title="Orange"></button>
          </div>
          <div class="color-premium">
            <button type="button" class="color-buy" data-color="preset" data-price="50">Unlock Preset Colors (50)</button>
            <button type="button" class="color-buy" data-color="custom" data-price="200">Custom Color (200)</button>
            <button type="button" class="color-buy" data-color="gradient" data-price="500">Gradient Color (500)</button>
          </div>
          <div id="preset-colors-row" class="preset-colors" style="display:none">
            <button type="button" class="preset-color" data-color="#e74c3c" style="background:#e74c3c" title="Red"></button>
            <button type="button" class="preset-color" data-color="#9b59b6" style="background:#9b59b6" title="Purple"></button>
            <button type="button" class="preset-color" data-color="#f1c40f" style="background:#f1c40f" title="Yellow"></button>
            <button type="button" class="preset-color" data-color="#1abc9c" style="background:#1abc9c" title="Teal"></button>
            <button type="button" class="preset-color" data-color="#e91e63" style="background:#e91e63" title="Pink"></button>
            <button type="button" class="preset-color" data-color="#00bcd4" style="background:#00bcd4" title="Cyan"></button>
          </div>
        </div>
        
        <!-- Bottom Buttons -->
        <div class="lobby-bottom-buttons">
          <button type="button" class="lobby-btn gift-btn hidden" id="daily-gift-btn"> Daily Gift</button>
          <button type="button" class="lobby-btn leaderboard-btn" id="leaderboard-btn"> Leaderboard</button>
        </div>
      </aside>
      <section class="landing-center">
        <div id="active-matches-container" class="hidden">
          <div id="active-matches-list"></div>
        </div>
        <button type="button" id="resume-match-btn" class="play-btn resume-btn hidden">Resume Match</button>
        <button type="button" id="landing-play" class="play-btn">Play</button>
        <div class="auth-buttons" id="landing-auth-buttons">
          <a href="/auth/google">Sign in with Google</a>
          <!-- <a href="#" id="landing-facebook" style="opacity:0.7">Sign in with Facebook</a> --> 
        </div>
        <div class="game-mode-center">
          <h3>Game Mode</h3>
          <div class="mode-buttons">
            <button type="button" class="mode-option selected" data-mode="ffa">FFA</button>
            <button type="button" class="mode-option" data-mode="teams">Teams</button>
            <button type="button" class="mode-option" data-mode="solo">Solo / vs CPU</button>
          </div>
          <div id="solo-options" class="solo-options hidden">
            <label class="solo-option-label">
              <input type="checkbox" id="cpu-shutdown-breeders" checked />
              CPUs help shut down breeders
            </label>
          </div>
          <div id="mp-options" class="solo-options hidden">
            <label class="solo-option-label">
              <input type="checkbox" id="bots-enabled" checked />
              Play with bots
            </label>
          </div>
        </div>
        <div class="live-matches-section">
          <h3>Live Matches</h3>
          <div id="live-matches-list" class="live-matches-list">
            <div class="live-matches-empty">No live matches</div>
          </div>
        </div>
        <div class="howto-section" style="margin-top:20px; text-align:left; max-width:360px;">
          <h3 style="font: 700 14px Rubik, sans-serif; color: #7bed9f; margin-bottom: 12px;">How To Play</h3>
          <p class="howto-text">Drive your <strong>van</strong> to rescue strays. Bring them to the <strong>Adoption Center</strong> (green zone) to adopt out, earn <strong>5 RT each</strong>. Rescue all the strays to win.</p>
          <p class="howto-text">Drive out <strong>Breeders</strong> by better feeding their pets. <strong>Don't let the breeders setup a Mill and release wandering strays</strong>! If breeders reach 2,000 strays the match is over.</p>
          <p class="howto-text">Build a <strong>shelter</strong> (250 RT), then buy an <strong>Adoption Center</strong> (250 RT) to adopt at your shelter for only 2RT each. Add <strong>Advertising and Gravity</strong> (200 and 300 RT) to pull strays.</p>
          <p class="howto-text">Press <span class="key">E</span> for build menu.</p>
          <h4 class="howto-subtitle">Controls</h4>
          <p class="howto-text howto-keys"><span class="key">W</span><span class="key">A</span><span class="key">S</span><span class="key">D</span> Move &nbsp; <span class="key">E</span> Build</p>
          <h4 class="howto-subtitle">Power-ups</h4>
          <p class="howto-text"><span class="orb green"></span> +Size &nbsp; <span class="orb blue"></span> Speed &nbsp; <span class="orb purple"></span> Port</p>
        </div>
      </section>
      <aside class="landing-right">
      <div class="lobby-leaderboard-panel">
        <h4 class="lobby-leaderboard-title">Live Leaderboard (Daily)</h4>
        <div id="lobby-leaderboard-content" class="lobby-leaderboard-content">
          <div class="lobby-leaderboard-loading">Connecting</div>
        </div>
      </div>
      <div class="lobby-leaderboard-panel" style="margin-top:12px">
        <h4 class="lobby-leaderboard-title">Game Stats</h4>
        <div id="game-stats-content" class="lobby-leaderboard-content" style="font-size:12px">
          <div class="lobby-leaderboard-loading">Loading</div>
        </div>
      </div>
      <!-- Server Clock -->
      <div id="server-clock-wrap" class="server-clock-wrap" style="margin-top:12px">
        <div class="server-clock-label">Game server (UTC)</div>
        <div id="server-clock-time" class="server-clock-time">--:--:-- UTC</div>
        <div id="server-clock-next-gift" class="server-clock-next-gift">Next daily gift: --</div>
      </div>
      <div class="referral-panel">
        <h4>Referrals</h4>
        <div id="referral-status" class="referral-status">Sign in to get your referral link.</div>
        <div id="referral-link" class="referral-link referral-hidden"></div>
        <button type="button" id="referral-copy-btn" class="referral-btn referral-hidden">Copy referral link</button>
        <button type="button" id="referral-claim-btn" class="referral-btn referral-hidden" style="margin-top:8px">Claim reward</button>
      </div>
      </aside>
    </main>
  </div>
  <div id="connection-overlay" class="hidden">
    <h2>Connecting</h2>
    <p>Waiting for game server. If this doesnt go away, the server isnt running.</p>
    <p>From the project root run: <code>npm run dev</code></p>
    <p>That starts both the server (ports 4000, 4001) and this client (3000).</p>
  </div>

  <!-- Item Selection Modal (shown before match if player has equipment items) -->
  <div id="item-select-overlay" class="hidden">
    <div class="item-select-panel">
      <div class="item-select-title">Select Equipment for This Match</div>
      <div class="item-select-subtitle">Choose which items to bring. RT is applied automatically.</div>

      <div class="item-select-row" id="item-row-ports">
        <div class="item-select-info">
          <span class="item-select-icon"></span>
          <span class="item-select-name">Teleport Charges</span>
          <span class="item-select-avail" id="item-avail-ports"></span>
        </div>
        <div class="item-select-controls">
          <button type="button" id="item-dec-ports"></button>
          <span class="item-select-qty" id="item-qty-ports">0</span>
          <button type="button" id="item-inc-ports">+</button>
        </div>
      </div>

      <div class="item-select-row" id="item-row-speed">
        <div class="item-select-info">
          <span class="item-select-icon"></span>
          <span class="item-select-name">Speed Boost</span>
          <span class="item-select-avail" id="item-avail-speed"></span>
        </div>
        <div class="item-select-controls">
          <button type="button" id="item-dec-speed"></button>
          <span class="item-select-qty" id="item-qty-speed">0</span>
          <button type="button" id="item-inc-speed">+</button>
        </div>
      </div>

      <div class="item-select-row" id="item-row-size">
        <div class="item-select-info">
          <span class="item-select-icon"></span>
          <span class="item-select-name">Size Boosts</span>
          <span class="item-select-avail" id="item-avail-size"></span>
        </div>
        <div class="item-select-controls">
          <button type="button" id="item-dec-size"></button>
          <span class="item-select-qty" id="item-qty-size">0</span>
          <button type="button" id="item-inc-size">+</button>
        </div>
      </div>

      <div class="item-select-row" id="item-row-adopt">
        <div class="item-select-info">
          <span class="item-select-icon"></span>
          <span class="item-select-name">Adopt Speed Boosts</span>
          <span class="item-select-avail" id="item-avail-adopt"></span>
        </div>
        <div class="item-select-controls">
          <button type="button" id="item-dec-adopt"></button>
          <span class="item-select-qty" id="item-qty-adopt">0</span>
          <button type="button" id="item-inc-adopt">+</button>
        </div>
      </div>

      <div class="item-select-row" id="item-row-tier3">
        <div class="item-select-info">
          <span class="item-select-icon"></span>
          <span class="item-select-name">Shelter Tier 3</span>
          <span class="item-select-avail" id="item-avail-tier3"></span>
        </div>
        <div class="item-select-controls">
          <button type="button" id="item-dec-tier3"></button>
          <span class="item-select-qty" id="item-qty-tier3">0</span>
          <button type="button" id="item-inc-tier3">+</button>
        </div>
      </div>

      <div class="item-select-actions">
        <button type="button" class="item-select-confirm" id="item-select-confirm-btn">Start Match</button>
        <button type="button" class="item-select-skip" id="item-select-skip-btn">Start Without Items</button>
      </div>
    </div>
  </div>

  <div id="abandon-confirm-popup" class="abandon-confirm-popup hidden">
    <p class="abandon-confirm-title">Start New Game?</p>
    <p class="abandon-confirm-text">This will abandon your saved match.<br>Your progress will be lost.</p>
    <div class="abandon-confirm-btns">
      <button type="button" id="abandon-confirm-btn" class="abandon-confirm-btn confirm">Abandon &amp; Start New</button>
      <button type="button" id="abandon-cancel-btn" class="abandon-confirm-btn cancel">Cancel</button>
    </div>
  </div>
  <div id="join-nobots-popup" class="join-nobots-popup hidden">
    <p class="join-nobots-title">Player Waiting!</p>
    <p id="join-nobots-text" class="join-nobots-text">There's an FFA match pending with no bots. Join them?</p>
    <div class="join-nobots-btns">
      <button type="button" id="join-nobots-btn" class="join-nobots-btn join">Join Match</button>
      <button type="button" id="skip-nobots-btn" class="join-nobots-btn skip">No, Play with Bots</button>
    </div>
  </div>
  <div id="game-wrap">
  <canvas id="game"></canvas>
  <div id="ui">
    <div class="top-bar">
      <span class="score" id="score">Size: 1</span>
      <span class="game-clock" id="game-clock">00:00:00</span>
      <span class="season-badge" id="season-badge"></span>
      <span id="team-score-hud" class="team-score-hud hidden">
        <span class="team-score-red" id="team-score-red">Red: 0</span>
        <span class="team-divider">|</span>
        <span class="team-score-blue" id="team-score-blue">Blue: 0</span>
      </span>
      <span class="timer" id="timer">5:00</span>
      <span id="ping" class="ping-display"></span>
      <div id="auth-area"></div>
      <button type="button" id="settings-btn" class="settings-btn" title="Settings" aria-label="Settings">&#9881;</button>
    </div>
    <div id="settings-panel" class="settings-panel hidden">
      <h3>Settings</h3>
      <div class="settings-slider-row">
        <label for="music-slider">Music</label>
        <input type="range" id="music-slider" min="0" max="100" value="100" class="settings-slider" />
      </div>
      <input type="checkbox" id="music-toggle" checked style="display:none" />
      <div class="settings-slider-row">
        <label for="sfx-slider">Sound effects</label>
        <input type="range" id="sfx-slider" min="0" max="100" value="100" class="settings-slider" />
      </div>
      <input type="checkbox" id="sfx-toggle" checked style="display:none" />
      <label><input type="checkbox" id="hide-strays-toggle" /> Hide strays on minimap</label>
      <label><input type="checkbox" id="shelter-adopt-sfx-toggle" checked /> Shelter adoption sounds</label>
      <label for="van-sound-select">Van sound</label>
      <select id="van-sound-select" class="settings-fps-select" aria-label="Van sound">
        <option value="off">Off</option>
        <option value="camaro" selected>1969 Camaro Z28</option>
        <!-- <option value="beetle">VW Beetle</option> -->
        <option value="ev">Silent EV</option>
      </select>
      <label for="fps-select">Frame rate</label>
      <select id="fps-select" class="settings-fps-select" aria-label="Frame rate">
        <option value="30">30 FPS</option>
        <option value="60">60 FPS</option>
      </select>
      <div style="display:flex; gap:8px; margin-top:12px;">
        <button type="button" id="exit-to-lobby-btn" class="settings-exit-lobby">Exit to lobby</button>
        <button type="button" id="settings-close" class="settings-close">Close</button>
      </div>
    </div>
    <div id="switch-server" class="switch-server hidden">
      <p>High latency. Switch server?</p>
      <button type="button" id="switch-server-btn" class="switch-server-btn">Switch server</button>
    </div>
    <div id="minimap-wrap"><canvas id="minimap" width="120" height="120"></canvas></div>
    <button type="button" id="stats-toggle-btn" class="stats-toggle-btn hidden" title="Match Stats">&#x1F4CA;</button>
    <div id="stats-panel" class="hidden">
      <div class="stats-panel-title">Match Stats</div>
      <div class="stats-row"><span class="stats-label">FPS</span><span class="stats-value" id="stats-fps">--</span></div>
      <div class="stats-row"><span class="stats-label">Ping</span><span class="stats-value" id="stats-ping">--</span></div>
    </div>
    <button type="button" id="event-toggle-btn" class="event-toggle-btn hidden" title="Adoption Events"></button>
    <div id="event-panel" class="hidden">
      <div class="event-panel-title"> Adoption Events</div>
      <div id="event-panel-list"></div>
    </div>
    <div class="bottom-bar">
      <span id="carried"></span>
      <span id="game-tokens" class="game-tokens">0 RT</span>
      <span id="tag-cooldown">Adoptions: 0</span>
    </div>
    <div id="leaderboard"></div>
    
    <!-- Breeder Mini-Game Modal -->
    <div id="breeder-minigame">
      <div class="breeder-header">
        <span class="breeder-title"> Stop the Breeders!</span>
        <div class="breeder-timer-area">
          <span class="breeder-timer" id="breeder-timer">30s</span>
          <button type="button" id="breeder-retreat-btn" class="breeder-retreat-btn">Retreat [R]</button>
        </div>
      </div>
      <div class="breeder-tokens" id="breeder-tokens">Your Tokens: 0 RT</div>
      <p id="breeder-instruction-1" style="margin-bottom:8px;color:rgba(255,255,255,0.8);font-size:12px;">1. Click a pet to select it</p>
      <p id="breeder-instruction-2" style="margin-bottom:12px;color:rgba(255,255,255,0.8);font-size:12px;">2. Click the matching food to rescue it!</p>
      <div class="breeder-action-row" id="breeder-action-row">
        <button type="button" id="instant-rescue-btn" class="instant-rescue-btn hidden"> Instant Rescue (0 RT)</button>
        <button type="button" class="breeder-close-btn hidden" id="breeder-close-btn">Continue [C]</button>
      </div>
      <div class="breeder-result hidden" id="breeder-result">
        <div class="breeder-result-title" id="breeder-result-title">Rescue Complete!</div>
        <div class="breeder-rewards" id="breeder-rewards"></div>
      </div>
      <div class="breeder-pets" id="breeder-pets">
        <!-- Pets will be added dynamically -->
      </div>
      <div class="breeder-foods" id="breeder-foods">
        <button type="button" class="breeder-food-btn" data-food="apple">
          <span class="food-icon"></span>
          <span>Apple</span>
          <span class="food-cost">5 RT</span>
        </button>
        <button type="button" class="breeder-food-btn" data-food="carrot">
          <span class="food-icon"></span>
          <span>Carrot</span>
          <span class="food-cost">8 RT</span>
        </button>
        <button type="button" class="breeder-food-btn" data-food="chicken">
          <span class="food-icon"></span>
          <span>Chicken</span>
          <span class="food-cost">15 RT</span>
        </button>
        <button type="button" class="breeder-food-btn" data-food="seeds">
          <span class="food-icon"></span>
          <span>Seeds</span>
          <span class="food-cost">5 RT</span>
        </button>
        <button type="button" class="breeder-food-btn" data-food="water" style="display:none;">
          <span class="food-icon"></span>
          <span>Water</span>
          <span class="food-cost">20 RT</span>
        </button>
        <button type="button" class="breeder-food-btn" data-food="bowl" style="display:none;">
          <span class="food-icon"></span>
          <span>Bowl</span>
          <span class="food-cost">20 RT</span>
        </button>
      </div>
    </div>
    
    <!-- Breeder Warning Popup (shown when player can't afford to win) -->
    <div id="breeder-warning-popup" class="breeder-warning-popup hidden">
      <div class="breeder-warning-title"> Warning: Likely Defeat!</div>
      <p class="breeder-warning-text" id="breeder-warning-text">This breeder camp requires more RT than you have to rescue all pets.</p>
      <p class="breeder-warning-stats" id="breeder-warning-stats">Required: 45+ RT | You have: 5 RT</p>
      <div class="breeder-warning-btns">
        <button type="button" id="breeder-warning-continue" class="breeder-warning-btn continue">Fight Anyway</button>
        <button type="button" id="breeder-warning-retreat" class="breeder-warning-btn retreat">Retreat</button>
      </div>
    </div>
    
    <div id="lobby-overlay" class="lobby-overlay hidden">
      <p id="lobby-message" class="lobby-message">Waiting for another player</p>
      <div id="team-select" class="team-select hidden">
        <p class="team-select-label">Choose your team:</p>
        <div class="team-select-btns">
          <button type="button" id="team-red-btn" class="team-btn team-btn-red selected" data-team="red">Team Red</button>
          <button type="button" id="team-blue-btn" class="team-btn team-btn-blue" data-team="blue">Team Blue</button>
        </div>
      </div>
      <div id="lobby-player-list" class="lobby-player-list"></div>
      <p id="lobby-countdown" class="lobby-countdown hidden"></p>
      <button type="button" id="lobby-ready-btn" class="fight-ally-btn ally-btn hidden">Ready</button>
      <button type="button" id="lobby-gift-btn" class="lobby-gift-btn hidden" title="Daily Gift"></button>
      <button type="button" id="lobby-back-btn" class="fight-ally-btn fight-btn" style="margin-top:12px">Back to lobby</button>
    </div>
    <div id="observer-overlay" class="observer-overlay hidden">
      <button type="button" id="observer-minimize-btn" class="observer-minimize-btn" title="Minimize">&minus;</button>
      <p class="observer-banner">Observing</p>
      <p class="observer-info">Use arrow keys or swipe to cycle players. Tap a van to follow it.</p>
      <p class="observer-info" style="font-size:11px; opacity:0.7; margin-top:2px;">&larr; &rarr; / Swipe: cycle vans &nbsp;|&nbsp; Tap van: follow &nbsp;|&nbsp; Minimap: free look</p>
      <button type="button" id="observer-back-btn" class="fight-ally-btn fight-btn" style="margin-top:8px">Back to lobby</button>
    </div>
    <button type="button" id="observer-mini-btn" class="observer-mini-btn hidden" title="Show observer panel">&#128065;</button>
    <div id="ally-request-popup" class="ally-request-popup hidden">
      <p class="ally-request-text"><span class="requester" id="ally-requester-name">Player</span> wants to ally!</p>
      <div class="ally-request-btns">
        <button type="button" id="ally-accept-btn" class="ally-request-btn accept">Accept</button>
        <button type="button" id="ally-deny-btn" class="ally-request-btn deny">Deny</button>
      </div>
    </div>
    <div id="transfer-confirm-popup" class="transfer-confirm-popup hidden">
      <p class="transfer-confirm-text">Transfer <span id="transfer-confirm-count">0</span> pets to ally's shelter?</p>
      <p class="transfer-confirm-hint">You get 30% adoption score, they get 70%.</p>
      <div class="transfer-confirm-btns">
        <button type="button" id="transfer-confirm-btn" class="ally-request-btn accept">Transfer</button>
        <button type="button" id="transfer-cancel-btn" class="ally-request-btn deny">Cancel</button>
      </div>
    </div>
    <div id="action-menu" class="action-menu hidden">
      <div class="action-menu-header">
        <span class="action-menu-title">Build Menu [E]</span>
        <button type="button" class="action-menu-close" id="action-menu-close">&times;</button>
      </div>
      <!-- Build Shelter (only shows if no shelter) -->
      <div class="action-menu-item" id="action-build-shelter">
        <div class="action-menu-item-header">
          <span class="action-menu-item-name">Build Shelter</span>
          <span class="action-menu-item-cost">250 RT</span>
        </div>
        <div class="action-menu-progress">
          <div class="action-menu-progress-label">Size: <span id="action-size-text">0/50</span></div>
          <div class="action-menu-progress-bar">
            <div class="action-menu-progress-fill size" id="action-size-bar" style="width: 0%"></div>
          </div>
        </div>
        <div class="action-menu-progress">
          <div class="action-menu-progress-label">Tokens: <span id="action-tokens-text">0/250 RT</span></div>
          <div class="action-menu-progress-bar">
            <div class="action-menu-progress-fill tokens" id="action-tokens-bar" style="width: 0%"></div>
          </div>
        </div>
        <button type="button" class="action-menu-btn" id="action-build-btn" disabled>Need Size 50 & 250 RT</button>
      </div>
      <!-- Adoption Center upgrade -->
      <div class="action-menu-item hidden" id="action-adoption-center">
        <div class="action-menu-item-header">
          <span class="action-menu-item-name"> Adoption Center</span>
          <span class="action-menu-item-cost">250 RT</span>
        </div>
        <div class="action-menu-item-desc">Enable adoptions at your shelter</div>
        <button type="button" class="action-menu-btn" id="action-adoption-btn" disabled>Buy</button>
      </div>
      <!-- Gravity upgrade -->
      <div class="action-menu-item hidden" id="action-gravity">
        <div class="action-menu-item-header">
          <span class="action-menu-item-name"> Gravity Pull</span>
          <span class="action-menu-item-cost">300 RT</span>
        </div>
        <div class="action-menu-item-desc">Attract strays to your shelter</div>
        <button type="button" class="action-menu-btn" id="action-gravity-btn" disabled>Buy</button>
      </div>
      <!-- Advertising upgrade -->
      <div class="action-menu-item hidden" id="action-advertising">
        <div class="action-menu-item-header">
          <span class="action-menu-item-name"> Advertising</span>
          <span class="action-menu-item-cost">200 RT</span>
        </div>
        <div class="action-menu-item-desc">Spawn more strays near shelter</div>
        <button type="button" class="action-menu-btn" id="action-advertising-btn" disabled>Buy</button>
      </div>
      <!-- Van Speed upgrade -->
      <div class="action-menu-item" id="action-van-speed">
        <div class="action-menu-item-header">
          <span class="action-menu-item-name"> Van Speed</span>
          <span class="action-menu-item-cost">150 RT</span>
        </div>
        <div class="action-menu-item-desc">Permanent 20% speed boost</div>
        <button type="button" class="action-menu-btn" id="action-van-speed-btn" disabled>Buy</button>
      </div>
      <div class="action-menu-hint">Press E again or click X to close</div>
    </div>
    <div class="bottom-action-bar">
      <button type="button" id="center-shelter-btn" class="center-shelter-btn hidden"></button>
      <button type="button" id="center-van-btn" class="center-van-btn hidden"></button>
      <button type="button" id="transfer-btn" class="transfer-btn hidden">Transfer [T] </button>
      <button type="button" id="adopt-speed-btn" class="adopt-speed-btn hidden">Adopt Speed [B] (0)</button>
      <button type="button" id="port-btn" class="port-btn hidden">Random [P] (0)</button>
      <button type="button" id="shelter-port-btn" class="shelter-port-btn hidden">Home [H] (0)</button>
      <button type="button" id="build-shelter-btn" class="build-shelter-btn hidden">Menu [E]</button>
      <button type="button" id="ground-btn" class="ground-btn hidden">Ground Here</button>
    </div>
    <div id="how-to-play" class="hidden">
      <div class="htp-header">How To Play <button class="htp-close" id="htp-close">&times;</button></div>
      <div class="htp-content">
        <p>Drive your <strong>van</strong> to rescue strays. Bring them to the central <strong>Adoption Center</strong> or build your own shelter!</p>
        <p>Press <strong>E</strong> for Build Menu: shelter (250 RT), adoption center (250 RT), gravity (300 RT), and more!</p>
        <p>Deliver pets to your shelter, and if it has an adoption center, it will adopt them automatically.</p>
        <p>First shelter to reach <strong>51% domination</strong> wins!</p>
        <div class="htp-controls">
          <h4>Controls</h4>
          <p>
            Movement: <span class="htp-key">W</span> <span class="htp-key">A</span> <span class="htp-key">S</span> <span class="htp-key">D</span> or tap/click
          </p>
          <p>Build Menu: <span class="htp-key">E</span></p>
          <p>
            <strong>Green orbs</strong> = +size &nbsp; <strong>Blue orbs</strong> = speed boost &nbsp; <strong>Purple orbs</strong> = port charge
          </p>
        </div>
      </div>
    </div>
  </div>
  </div>
  <!-- Color Picker Modal -->
  <div id="color-picker-modal" class="color-picker-modal hidden">
    <div class="color-picker-content">
      <h3 id="color-picker-title">Pick a Color</h3>
      <input type="color" id="color-picker-input" value="#ff5500" />
      <input type="color" id="color-picker-input2" value="#00aaff" style="display:none" />
      <div class="color-picker-btns">
        <button type="button" class="color-picker-cancel" id="color-picker-cancel">Cancel</button>
        <button type="button" class="color-picker-confirm" id="color-picker-confirm">Confirm</button>
      </div>
    </div>
  </div>
  
  <!-- Boss Mode Timer Overlay -->
  <div id="boss-mode-timer" class="boss-mode-timer hidden">
    <div class="boss-timer-content">
      <div class="boss-timer-title">BOSS MODE</div>
      <div class="boss-timer-time" id="boss-timer-time">5:00</div>
      <div class="boss-timer-mills" id="boss-timer-mills">0/5 Mills Cleared</div>
    </div>
    <div class="boss-radar" id="boss-radar">
      <div class="radar-label">Tycoon</div>
      <div class="radar-indicator" id="radar-indicator"></div>
    </div>
  </div>
  
  <!-- Boss Mill Modal -->
  <div id="boss-mill-modal" class="boss-mill-modal hidden">
    <div class="boss-mill-content">
      <div class="boss-mill-header">
        <h2 id="boss-mill-title"> Horse Stable</h2>
        <span class="boss-mill-close" id="boss-mill-close">&times;</span>
      </div>
      <div class="boss-mill-body">
        <div class="boss-mill-info">
          <p id="boss-mill-desc">Prepare a meal to rescue the horses!</p>
          <p id="boss-mill-pets-info">Pets to rescue: <span id="boss-mill-pet-count">5</span></p>
          <p id="boss-mill-rt-info">Your RT: <span id="boss-mill-player-rt">0</span></p>
        </div>
        <div class="boss-mill-recipe">
          <h3>Required Ingredients</h3>
          <div id="boss-mill-ingredients"></div>
        </div>
        <div class="boss-mill-actions">
          <button type="button" id="boss-mill-submit" class="boss-mill-submit" disabled>Submit Meal</button>
          <button type="button" id="boss-mill-flee" class="boss-mill-flee">Flee (Close)</button>
        </div>
        <div class="boss-mill-warning hidden" id="boss-mill-warning">
          <span class="warning-icon"></span>
          <span class="warning-text">Breeder Tycoon approaching!</span>
        </div>
      </div>
    </div>
  </div>
  
  <style>
    /* Boss Mode Timer Overlay Styles */
    .boss-mode-timer {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      gap: 20px;
      background: linear-gradient(135deg, rgba(139, 69, 19, 0.9), rgba(50, 25, 10, 0.95));
      border: 2px solid #ffd700;
      border-radius: 12px;
      padding: 10px 20px;
      z-index: 100;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    }
    .boss-mode-timer.hidden {
      display: none;
    }
    .boss-timer-content {
      text-align: center;
    }
    .boss-timer-title {
      color: #ffd700;
      font-size: 12px;
      font-weight: bold;
      letter-spacing: 2px;
      margin-bottom: 2px;
    }
    .boss-timer-time {
      color: #fff;
      font-size: 28px;
      font-weight: bold;
      font-family: 'Courier New', monospace;
    }
    .boss-timer-time.low {
      color: #ff4444;
      animation: pulse-timer 0.5s infinite;
    }
    .boss-timer-mills {
      color: #90ee90;
      font-size: 12px;
    }
    @keyframes pulse-timer {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .boss-radar {
      width: 60px;
      height: 60px;
      background: radial-gradient(circle, rgba(0,0,0,0.8) 0%, rgba(50,50,50,0.6) 100%);
      border: 2px solid #666;
      border-radius: 50%;
      position: relative;
      overflow: hidden;
    }
    .radar-label {
      position: absolute;
      top: 2px;
      left: 50%;
      transform: translateX(-50%);
      color: #888;
      font-size: 8px;
      text-transform: uppercase;
    }
    .radar-indicator {
      position: absolute;
      width: 8px;
      height: 8px;
      background: #ff4444;
      border-radius: 50%;
      box-shadow: 0 0 10px #ff0000;
      transition: all 0.2s;
    }
    
    /* Boss Mill Modal Styles */
    .boss-mill-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .boss-mill-modal.hidden {
      display: none;
    }
    .boss-mill-content {
      background: linear-gradient(135deg, #2d1f1f 0%, #1a1212 100%);
      border: 3px solid #8b4513;
      border-radius: 16px;
      padding: 0;
      max-width: 450px;
      width: 90%;
      box-shadow: 0 0 40px rgba(139, 69, 19, 0.5);
      pointer-events: auto;
      position: relative;
    }
    .boss-mill-header {
      background: linear-gradient(90deg, #8b4513, #654321);
      padding: 16px 20px;
      border-radius: 12px 12px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .boss-mill-header h2 {
      margin: 0;
      color: #ffd700;
      font-size: 1.5rem;
    }
    .boss-mill-close {
      color: #fff;
      font-size: 28px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s;
    }
    .boss-mill-close:hover {
      opacity: 1;
    }
    .boss-mill-body {
      padding: 20px;
    }
    .boss-mill-info {
      margin-bottom: 20px;
      color: #ccc;
    }
    .boss-mill-info p {
      margin: 8px 0;
    }
    .boss-mill-info span {
      color: #ffd700;
      font-weight: bold;
    }
    .boss-mill-recipe h3 {
      color: #ffd700;
      margin: 0 0 12px 0;
      font-size: 1.1rem;
    }
    #boss-mill-ingredients {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .ingredient-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(255, 255, 255, 0.05);
      padding: 10px 14px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .ingredient-row.complete {
      background: rgba(100, 200, 100, 0.2);
      border-color: #4CAF50;
    }
    .ingredient-name {
      color: #fff;
      font-weight: 500;
      flex: 1;
    }
    .ingredient-progress {
      color: #ffd700;
      margin: 0 16px;
      min-width: 60px;
      text-align: center;
    }
    .ingredient-row.complete .ingredient-progress {
      color: #4CAF50;
    }
    .ingredient-buy {
      background: linear-gradient(135deg, #4CAF50, #388E3C);
      color: white;
      border: none;
      padding: 6px 14px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.2s;
      pointer-events: auto;
      position: relative;
      z-index: 10;
    }
    .ingredient-buy:hover:not(:disabled) {
      transform: scale(1.05);
      box-shadow: 0 2px 10px rgba(76, 175, 80, 0.4);
    }
    .ingredient-buy:disabled {
      background: #444;
      cursor: not-allowed;
      opacity: 0.5;
    }
    .boss-mill-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }
    .boss-mill-submit {
      flex: 2;
      background: linear-gradient(135deg, #ffd700, #daa520);
      color: #1a1a1a;
      border: none;
      padding: 14px 20px;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
    }
    .boss-mill-submit:hover:not(:disabled) {
      transform: scale(1.02);
      box-shadow: 0 4px 20px rgba(255, 215, 0, 0.4);
    }
    .boss-mill-submit:disabled {
      background: #555;
      color: #888;
      cursor: not-allowed;
    }
    .boss-mill-flee {
      flex: 1;
      background: rgba(255, 68, 68, 0.2);
      color: #ff6666;
      border: 2px solid #ff4444;
      padding: 14px 20px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s;
    }
    .boss-mill-flee:hover {
      background: rgba(255, 68, 68, 0.4);
    }
    .boss-mill-warning {
      margin-top: 16px;
      padding: 12px;
      background: rgba(255, 68, 68, 0.3);
      border: 2px solid #ff4444;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
      animation: pulse-warning 0.5s infinite;
    }
    .boss-mill-warning.hidden {
      display: none;
    }
    .warning-icon {
      font-size: 1.5rem;
    }
    .warning-text {
      color: #ff6666;
      font-weight: bold;
    }
    @keyframes pulse-warning {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
  </style>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <div id="friends-panel" class="friends-panel hidden">
    <div class="friends-panel-header">
      <h3>Friends & Foes</h3>
      <button type="button" id="friends-panel-close" class="friends-panel-close-btn">&times;</button>
    </div>
    <div id="friends-list" class="friends-list"></div>
  </div>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
